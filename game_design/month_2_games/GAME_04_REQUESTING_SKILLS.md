# Game Design Document: Requesting Skills (Virtual Store)
## SkillBridge Educational Gaming Platform

**Game ID**: GAME-004
**Development Priority**: Month 2, Week 1-2
**Status**: Design Phase
**Document Version**: 1.0
**Last Updated**: October 13, 2025

---

## 1. GAME OVERVIEW

### Game Title
**Requesting Skills: Virtual Store Adventure**

### High-Level Concept
An immersive virtual shopping simulation where children learn functional requesting and manding skills through AAC integration, voice input, and gesture-based communication. Players navigate a friendly neighborhood store (grocery, toy store, bakery, cafe) making purchases using their communication system of choice. The game systematically teaches VB-MAPP Mands (requests) and ABLLS-R H-series (Requesting) skills while building independence in real-world shopping scenarios.

### Target Audience
- **Primary**: Autistic children ages 3-8
- **Difficulty Level**: 2-5 (Emerging to fluent communicator)
- **Prerequisites**:
  - Object recognition (basic tacting)
  - Pointing or AAC selection capability
  - Attention span of 5-8 minutes
  - Optional: Basic receptive language

### Core Learning Objectives

**Primary Skills** (VB-MAPP Mands):
- **Mand 1-2**: Mands (requests) for 2-4 desired items (reinforcers) without prompts
- **Mand 3-4**: Generalizes manding across 3+ settings, people, examples
- **Mand 5-6**: Mands for 10+ desired items using verbal or AAC
- **Mand 7-8**: Mands with multiple-word phrases ("I want cookie", "May I have juice")
- **Mand 9-10**: Mands for information (asks "What's that?", "Where is it?")
- **Mand 11-12**: Mands for help, actions from others ("Open this", "Help me please")
- **Mand 13-14**: Spontaneous manding (initiates requests without adult prompts)
- **Mand 15**: Mands for missing items ("I need the [item]")

**Secondary Skills** (ABLLS-R H-Series - Requesting):
- **H1**: Requests reinforcers (single item)
- **H2**: Requests using 2+ words ("Want ball")
- **H3**: Requests items not present (generalization)
- **H4**: Requests actions ("Push me", "Tickle")
- **H5**: Requests information ("What is that?")
- **H6**: Requests help ("Help please")
- **H7**: Requests politely ("May I have...", "Please")
- **H8**: Requests break/cessation ("All done", "Stop")

**AFLS Community Skills**:
- **AFLS Basic Living**: Making purchases, selecting items, waiting in line
- **Money concepts**: Basic coin/bill recognition (optional advanced)
- **Social commerce**: Greeting store clerk, saying "thank you", payment interaction

### Game Duration
- **Per Session**: 10-15 minutes
- **Per Store Visit**: 3-5 minutes
- **Total Scenarios**: 30+ store visit scenarios across 5 store types
- **Estimated Mastery Time**: 6-10 weeks (3-4 sessions/week)

### Critical Design Philosophy: Communication First

**AAC-Centered Design**:
- NO verbal speech required - AAC is equal, not backup
- Visual supports prominent throughout
- Processing time accommodated (no rushed demands)
- Multiple communication modalities honored (AAC, voice, gesture, sign)
- Success defined by FUNCTIONAL communication, not specific method

---

## 2. LEARNING OBJECTIVES & CLINICAL FRAMEWORK

### VB-MAPP Manding Milestones (Developmental Progression)

#### Level 1 (0-18 months developmental)

**Mand 1**: Mands for 2 different reinforcers (e.g., cookie, juice) without prompts
- **Game Implementation**: Child sees 2 desired items, spontaneously requests using any modality
- **Target**: 80% spontaneous manding across 10 trials
- **Data Point**: Time from seeing item to mand initiation (latency)

**Mand 2**: Generalizes manding across 2+ people, 2+ settings, 10+ examples
- **Game Implementation**: Same items available in different stores, with different clerks
- **Target**: Mands in grocery store, toy store, bakery with same success rate
- **Data Point**: Generalization index (performance consistency across contexts)

#### Level 2 (18-30 months developmental)

**Mand 3**: Mands for 10 items using vocal or AAC system
- **Game Implementation**: Virtual store has 20+ items, child must request specific ones
- **Target**: 90% accuracy selecting and requesting target item
- **Data Point**: Item-request matching accuracy

**Mand 4**: Mands with 2-word phrases (noun + verb, or modifier + noun)
- **Game Implementation**: AAC board displays "I want [item]", child combines symbols
- **Target**: 75% multi-word mands vs single-word
- **Data Point**: MLU (Mean Length of Utterance) in manding

**Mand 5**: Mands for 20 different items (expanding vocabulary)
- **Game Implementation**: Progressive item introduction, mastery tracking per item
- **Target**: 80%+ accuracy across all 20 items
- **Data Point**: Manding vocabulary size

**Mand 6**: Mands for information ("What's that?", "Where?")
- **Game Implementation**: New/unfamiliar items appear, child asks questions
- **Target**: 70% spontaneous information-seeking mands
- **Data Point**: Question-asking frequency and appropriateness

#### Level 3 (30-48 months developmental)

**Mand 7**: Mands for others' actions ("Push swing", "Open door", "Read book")
- **Game Implementation**: Items requiring clerk assistance (locked case, heavy box, high shelf)
- **Target**: 75% requests for action vs item requests
- **Data Point**: Action mand vs object mand ratio

**Mand 8**: Mands with 3+ words ("I want blue ball", "Can I have cookie please")
- **Game Implementation**: AAC syntax expansion, carrier phrases + item + descriptor
- **Target**: 60% mands include 3+ words (developmentally appropriate)
- **Data Point**: Syntax complexity score

**Mand 9**: Spontaneous manding without adult prompt (14/15 opportunities per hour)
- **Game Implementation**: Unprompted requests, natural environment simulation
- **Target**: 90% spontaneous (vs prompted) mands
- **Data Point**: Spontaneity index

**Mand 10**: Mands for missing items ("I need [item]", "Where's the [item]?")
- **Game Implementation**: Cart missing expected item, child notices and mands
- **Target**: 70% missing item mands without prompt
- **Data Point**: Problem-solving mands frequency

### ABLLS-R H-Series Alignment

| ABLLS-R Code | Skill Description | Game Mechanic | Mastery Criteria |
|--------------|-------------------|---------------|------------------|
| **H1** | Requests reinforcer (single item) | Touch item → AAC/voice request | 90% over 3 sessions |
| **H2** | Requests with 2+ words | Combine AAC symbols "want" + "cookie" | 80% over 3 sessions |
| **H3** | Requests items not present | Request from list (not visible) | 75% over 3 sessions |
| **H4** | Requests actions from others | "Help me", "Open this" to clerk | 75% over 3 sessions |
| **H5** | Requests information | "What is that?", "How much?" | 70% over 3 sessions |
| **H6** | Requests help appropriately | Uses "help" symbol/word when stuck | 80% over 3 sessions |
| **H7** | Requests politely | Includes "please", "thank you" | 70% over 3 sessions |
| **H8** | Requests break/cessation | "All done", "No more" when finished | 85% over 3 sessions |

### Teaching Methodology

**1. Natural Environment Teaching (NET) Applied to Virtual Commerce**
```
Natural SD: Child sees cookie on shelf
Natural Response: Child mands "Cookie!" or touches AAC symbol
Natural Consequence: Clerk retrieves cookie, child receives it (virtual)
Natural Reinforcement: Cookie added to cart, visual celebration
```

**2. Incidental Teaching (IT) Framework**
```
Setup: Child approaches toy aisle
IT Opportunity: Multiple toys visible, child shows interest
Adult Move: Clerk waits expectantly (3-5 seconds)
Child Mand: "I want car" (AAC or voice)
Elaboration: "Which color car?" (expands mand)
Reinforcement: Car added to cart immediately
```

**3. Errorless Learning for Anxiety Reduction**
- First trials: Full AAC sentence highlighted (e.g., "I want [item]" pre-populated)
- Visual prompt: Arrow points to correct AAC symbol
- Auditory prompt: Clerk models request ("You can say 'cookie please'")
- Physical prompt: Item glows when child looks at it
- Prompts fade systematically across sessions

**4. Prompt Hierarchy (Least-to-Most)**
```
Level 0: Independent (goal state)
  - Child sees item, spontaneously mands without any prompt
  - Latency <5 seconds

Level 1: Natural environment cue
  - Clerk looks at child expectantly
  - Item glows slightly (attention cue)
  - 5-second wait

Level 2: Gestural prompt
  - Clerk points to item, then to AAC device
  - Visual arrow appears between item and AAC
  - 5-second wait

Level 3: Verbal prompt
  - Clerk says "What do you want?" or "Tell me"
  - AAC symbol highlighted
  - 3-second wait

Level 4: Model prompt
  - Clerk models mand: "You can say 'I want cookie'"
  - AAC sentence displayed
  - 2-second wait

Level 5: Full physical (errorless)
  - AAC auto-navigates to correct page
  - Correct symbol pulses
  - Child only needs to touch highlighted symbol
```

**5. Reinforcement Schedule**
- **Continuous Reinforcement (CRF)**: During acquisition, every appropriate mand reinforced
- **Variable Ratio 2-3 (VR-2, VR-3)**: During fluency, average every 2-3 mands reinforced
- **Natural Reinforcement**: Receiving requested item is PRIMARY reinforcer
- **Social Reinforcement**: Clerk praise, parent praise (if co-playing)
- **Token Economy**: Points toward virtual rewards (stickers, badges)

**6. Generalization Programming**
```
Multiple Exemplar Training:
- 5 store types (grocery, toy, bakery, cafe, clothing)
- 3+ clerk characters (diverse, different voices)
- 20+ items per store
- Morning/afternoon/evening contexts
- Solo shopping vs with parent avatar

Generalization Probes (Every 10 sessions):
- Novel store (ice cream shop)
- Novel clerk (new character)
- Novel items (not previously taught)
- Novel context (birthday party shopping)
→ Target: 70%+ accuracy in novel conditions
```

---

## 3. CORE GAMEPLAY MECHANICS

### Game Loop (Typical Store Visit)

**Phase 1: Store Selection** (30 seconds)
```
1. Main hub: Neighborhood map with 5 stores
2. Child selects store (tap/voice/AAC "I want to go to [store]")
3. Transition animation: Walk/drive to store
4. Accessibility: Screen reader announces "Entering [store name]"
```

**Phase 2: Store Entry** (10 seconds)
```
1. Automatic door opens (sensory-friendly, quiet whoosh)
2. Clerk greets: "Welcome! What can I help you find?"
3. Store overview: Items visible on shelves/displays
4. Shopping cart appears (visual inventory tracker)
5. Accessibility: Clerk greeting announced via screen reader
```

**Phase 3: Item Browsing** (30-90 seconds)
```
Player can:
- Move avatar through store (arrow keys, drag, joystick)
- Zoom in on items (pinch, double-tap)
- View item details (hover shows name + AAC symbol)
- AAC board accessible anytime (always-visible button)

Items categorized:
- Produce section (fruits, vegetables)
- Dairy section (milk, cheese, yogurt)
- Snacks aisle (cookies, chips, crackers)
- Beverages (juice, water, soda)
- Checkout area (impulse items: gum, candy)

Visual supports:
- Category signs (Pictures + Words)
- Price tags (optional money concept teaching)
- Item count (Max 5 items in cart - executive function)
```

**Phase 4: Requesting Item** (5-20 seconds per item)
```
INTERACTION SEQUENCE:

1. Child indicates interest (taps item, looks at item, moves near it)
   ↓
2. Item glows, clerk approaches (if not already near)
   ↓
3. Clerk waits expectantly (3-10 seconds, adjustable)
   ↓
4. CHILD MANDS using one of these methods:

   METHOD A: AAC DEVICE (Proloquo2Go, TD Snap, LAMP)
   - Child navigates to item symbol
   - Taps symbol or builds sentence "I want [item]"
   - AAC voice output speaks request
   - Clerk acknowledges immediately

   METHOD B: VOICE COMMAND
   - Child says "Cookie" or "I want cookie" or "Cookie please"
   - Game recognizes speech (Web Speech API)
   - Clerk acknowledges immediately

   METHOD C: IN-GAME AAC BOARD
   - AAC board displays on screen
   - Core vocabulary + store-specific items
   - Child taps symbols: "I" + "want" + "cookie"
   - Clerk acknowledges immediately

   METHOD D: POINTING (beginner mode)
   - Child drags item toward clerk
   - Clerk asks "Do you want the cookie?"
   - Child confirms (nod, yes symbol, thumbs up)
   - Acceptable for emergent communicators

   ↓
5. CLERK RESPONSE:
   - Verbal: "Great! Here's the cookie!" OR "You want the cookie?"
   - Visual: Clerk retrieves item, holds it up
   - Animation: Item floats from shelf to clerk to cart
   - Cart updates: Cookie icon appears in cart inventory
   - Reinforcement: Sparkles, chime sound (non-intrusive)

6. FEEDBACK & DATA:
   - Correct mand: "Awesome requesting!" (visual checkmark)
   - Prompt used: Recorded for data (independent vs prompted)
   - Response time: Logged (latency analysis)
   - Skill practiced: H1 (Request item) marked +1 success

7. NEXT ITEM PROMPT:
   - Clerk: "What else do you need?" (if <5 items in cart)
   - Visual: Shopping list appears (optional support)
   - Child can continue shopping or proceed to checkout
```

**Phase 5: Checkout** (30-60 seconds)
```
1. Child approaches checkout counter (prompted after 3-5 items)
2. Clerk: "Ready to check out?"
3. Child confirms (AAC "Yes", "All done shopping", voice)

4. CHECKOUT SEQUENCE:
   - Items appear on conveyor belt (visual)
   - Clerk scans each item (beep sound, visual scan line)
   - Total displayed: "3 items, $6.00" (optional money teaching)
   - Payment method selected:
     * Mom's credit card (tap card)
     * Cash (drag bills to clerk)
     * "Mom will pay" (verbal/AAC)
   - Clerk: "Thank you! Here's your receipt."

5. SOCIAL EXCHANGE (Advanced):
   - Clerk: "Did you find everything you needed?" (conversation)
   - Child can respond: "Yes", "Thank you", nod
   - Clerk: "Have a great day!"
   - Child: "Bye!" (manding farewell)

6. EXIT & REINFORCEMENT:
   - Bag items (animation)
   - Exit store with shopping bag
   - Session summary appears:
     * Items requested: 5/5 ✓
     * Used AAC: 4/5, Voice: 1/5
     * Spontaneous mands: 3/5 (60%)
     * Points earned: +50
     * Badge: "Super Shopper Bronze"
```

**Phase 6: Session Complete** (15 seconds)
```
1. Return to neighborhood hub
2. "Play again?" OR "Try a different store?"
3. Progress saved to backend API
4. Parent dashboard updated (skill progress, new items mastered)
```

### AAC Device Integration (Technical Implementation)

**Proloquo2Go Integration**
```csharp
// Proloquo2Go sends message via iOS App Groups or URL scheme
public class Proloquo2GoListener : MonoBehaviour
{
    void OnApplicationPause(bool pauseStatus)
    {
        if (!pauseStatus) // App resumed
        {
            CheckForProloquoMessage();
        }
    }

    void CheckForProloquoMessage()
    {
        string message = IOSMessageHandler.GetLastMessage("group.proloquo2go");
        if (!string.IsNullOrEmpty(message))
        {
            ProcessMand(message);
        }
    }

    void ProcessMand(string message)
    {
        // Parse message: "I want cookie"
        string[] words = message.Split(' ');
        string targetItem = words[words.Length - 1]; // "cookie"

        // Find item in store
        StoreItem item = FindItemByName(targetItem);

        if (item != null)
        {
            // Successful mand!
            ClerkResponse(item);
            AddToCart(item);
            RecordMand(mandText: message, method: "Proloquo2Go",
                      successful: true, prompted: false);
        }
        else
        {
            // Item not available or misunderstood
            ClerkResponse_Clarify(targetItem);
        }
    }
}
```

**TD Snap API Integration**
```csharp
// TD Snap communicates via Bluetooth or TCP/IP socket
public class TDSnapListener : MonoBehaviour
{
    private TcpClient tdSnapClient;

    void Start()
    {
        ConnectToTDSnap();
    }

    void ConnectToTDSnap()
    {
        try
        {
            tdSnapClient = new TcpClient("localhost", 8888); // TD Snap listening port
            NetworkStream stream = tdSnapClient.GetStream();
            byte[] data = new byte[256];

            // Listen for messages
            while (true)
            {
                int bytes = stream.Read(data, 0, data.Length);
                string message = Encoding.UTF8.GetString(data, 0, bytes);
                ProcessMand(message);
            }
        }
        catch (Exception e)
        {
            Debug.LogError($"TD Snap connection failed: {e.Message}");
        }
    }

    void ProcessMand(string message)
    {
        // Similar to Proloquo2Go processing
        // TD Snap sends JSON: {"symbols": ["I", "want", "cookie"], "text": "I want cookie"}
        var json = JsonUtility.FromJson<TDSnapMessage>(message);
        ProcessMandFromSymbols(json.symbols, json.text);
    }
}
```

**In-Game AAC Board (Fallback/Standalone Mode)**
```csharp
public class InGameAACBoard : MonoBehaviour
{
    [Header("AAC Configuration")]
    public List<AACSymbol> coreVocabulary; // I, want, need, help, more, etc.
    public List<AACSymbol> storeSpecificVocabulary; // Dynamic based on current store

    private List<AACSymbol> currentSentence = new List<AACSymbol>();

    public void OnSymbolTapped(AACSymbol symbol)
    {
        // Add symbol to sentence
        currentSentence.Add(symbol);
        UpdateSentenceDisplay();

        // Auto-speak if sentence complete
        if (IsSentenceComplete(currentSentence))
        {
            SpeakSentence();
            ProcessMand(GetSentenceText());
            ClearSentence();
        }
    }

    string GetSentenceText()
    {
        return string.Join(" ", currentSentence.Select(s => s.text));
    }

    void SpeakSentence()
    {
        // Use iOS/Android TTS
        TextToSpeech.Speak(GetSentenceText(), voice: "child_friendly");
    }

    bool IsSentenceComplete(List<AACSymbol> symbols)
    {
        // Simple heuristic: Subject + Verb + Object = complete
        // "I" + "want" + "cookie" = complete
        if (symbols.Count >= 2)
        {
            // Has action word and object
            return symbols.Any(s => s.type == SymbolType.Action) &&
                   symbols.Any(s => s.type == SymbolType.Object);
        }
        return false;
    }
}

[System.Serializable]
public class AACSymbol
{
    public string id;
    public string text;
    public Sprite icon;
    public SymbolType type;
    public AudioClip voiceClip; // Pre-recorded word pronunciation
}

public enum SymbolType
{
    Subject,   // I, you, we
    Action,    // want, need, like, see
    Object,    // cookie, ball, juice
    Descriptor, // big, red, cold
    Social     // please, thank you, hello, bye
}
```

### Difficulty Progression System

**Adaptive Difficulty Parameters**:
1. **Number of items available**: 3 → 5 → 10 → 20+
2. **Mand complexity required**: Single word → 2 words → 3+ words
3. **Prompt level**: Full prompts → gestural → independent
4. **Wait time before prompt**: 3s → 5s → 10s → no prompt
5. **Distractor items**: None → 2 → 5 (non-reinforcing items)
6. **Novel items**: 0% → 20% → 50% (generalization testing)
7. **Social complexity**: Simple exchange → conversation → problem-solving

**Level Progression Chart**:

| Level | Stores Unlocked | Items Available | Mand Type | Prompt Support | Success Criteria |
|-------|----------------|-----------------|-----------|----------------|------------------|
| **1** | Grocery (basic) | 5 (cookie, juice, apple, milk, banana) | Single word | Full (model + highlight) | 80% appropriate mands |
| **2** | Grocery (expanded) | 10 items | Single word or "I want X" | Gestural + verbal | 75% appropriate mands |
| **3** | Toy Store | 10 toys | "I want X" required | Gestural only | 80% appropriate mands |
| **4** | Bakery | 12 items | "I want X please" | Minimal prompts | 75% with 3+ words |
| **5** | Cafe | 15 drinks/snacks | "May I have X" | Independent expected | 70% spontaneous |
| **6** | Clothing Store | 20 items | Descriptors required ("red shirt") | Independent | 70% spontaneous + descriptors |
| **7** | Mixed Shopping | All stores | 30+ items | Independent | 80% spontaneous, 60% novel items |
| **8** | Problem-Solving | All stores | Missing items scenarios | Independent | 70% appropriate responses |
| **9** | Social Shopping | All stores + peer avatar | Conversational exchanges | Independent | 70% social mands |
| **10** | Community Mastery | Novel stores (pharmacy, pet store) | Generalization test | Independent | 70%+ novel context success |

**Adaptive Algorithm**:
```python
def adjust_difficulty(session_performance):
    accuracy = session_performance['appropriate_mands'] / session_performance['total_opportunities']
    spontaneity_rate = session_performance['spontaneous_mands'] / session_performance['total_mands']
    avg_mand_length = session_performance['total_words'] / session_performance['total_mands']

    # INCREASE DIFFICULTY
    if accuracy >= 0.85 and spontaneity_rate >= 0.70 and consecutive_successes >= 3:
        current_level += 1
        add_complexity()
        reduce_prompts()

    # DECREASE DIFFICULTY
    elif accuracy < 0.60 or spontaneity_rate < 0.40:
        if consecutive_struggles >= 2:
            current_level = max(1, current_level - 1)
            simplify()
            increase_prompts()

    # MAINTAIN (optimal challenge zone)
    else:
        vary_items()  # Same difficulty, different content
        maintain_prompt_level()

def add_complexity():
    if num_items < 30:
        num_items += 5
    if mand_length_required < 4:
        mand_length_required += 1
    if novel_item_percentage < 0.50:
        novel_item_percentage += 0.10

def simplify():
    if num_items > 5:
        num_items -= 3
    if mand_length_required > 1:
        mand_length_required = 1
    novel_item_percentage = 0.0
    enable_full_prompts()
```

---

## 4. USER EXPERIENCE DESIGN

### Visual Design Language

**Art Style**: Warm, inviting, realistic (not overly cartoonish)
- **Stores**: Photo-realistic with soft lighting, organized shelves
- **Items**: Clear, recognizable product images (familiar brands adapted)
- **Characters**: Diverse clerks (age, ethnicity, gender, abilities)
- **UI**: Clean, large touch targets, AAC-symbol consistent design

**Color Palette**:
- **Primary**: Warm neutrals (beige, soft white, light wood tones)
- **Accents**: Calming blues/greens for UI elements
- **Item highlights**: Soft yellow glow (not harsh)
- **Feedback**: Green checkmarks, blue info, red "out of stock" (accessible contrast)

**Sensory Profiles**:

**Calm Profile**:
- Muted store colors (desaturated)
- Minimal background animations
- Quiet ambient sounds (no music)
- Clerk speaks softly, slowly
- No crowds or background people

**Energetic Profile**:
- Vibrant store colors
- Animated store elements (signs, decorations)
- Upbeat background music
- Clerk enthusiastic, expressive
- Other shoppers in background (depth)

**Focused Profile**:
- High contrast (item vs background)
- No decorative elements
- Neutral gray backgrounds
- Text-only labels (minimal visual noise)
- Sounds only for critical feedback

### Audio Design

**Ambient Store Sounds**:
- Grocery: Soft refrigerator hum, distant chatter (10% volume)
- Toy Store: Music box, gentle toy sounds
- Bakery: Soft jazz, oven timer beeps
- Cafe: Coffee machine, soft conversations
- Clothing: Hangers sliding, fabric rustling

**Clerk Voice Options**:
- **Voice 1**: Female adult, warm, patient
- **Voice 2**: Male adult, friendly, encouraging
- **Voice 3**: Teenager, relatable, casual
- **Voice 4**: AAC-style synthesized voice (consistency with child's device)
- **Customization**: Speed (0.5x - 1.5x), pitch (±20%)

**Sound Effects**:
| Event | Sound | Volume | Duration |
|-------|-------|--------|----------|
| Item selected | Soft "tap" | 50% | 0.1s |
| Item added to cart | Pleasant "plop" + chime | 70% | 0.3s |
| Cart updated | Register "ding" | 60% | 0.2s |
| Checkout scan | Beep (not harsh) | 50% | 0.1s |
| Success | Gentle success fanfare | 80% | 1.5s |
| Clerk speaks | Voice-over | 100% | Variable |

**Voice-Over Scripts** (Sample):

```
STORE ENTRY:
- "Welcome to [Store Name]! What would you like today?"
- "Hi! I'm here to help. What can I get for you?"
- "Good morning! Take your time looking around."

WAITING FOR MAND (after 5s):
- "What do you need?" (gesture to items)
- "I'm ready when you are!"
- "Let me know if you see something you want."

AFTER SUCCESSFUL MAND:
- "Great job asking! Here's the [item]!"
- "Perfect! I'll get that for you right away."
- "You got it! [Item] is coming up!"

MAND CLARIFICATION:
- "Did you say [item]? Let me know if that's right!"
- "I want to make sure - you want the [item]?"
- "Can you show me which one? There are a few [items]."

CHECKOUT:
- "All set? Let's check out!"
- "Did you find everything you needed?"
- "Thank you for shopping here! Come back soon!"
```

### UI Layout (16:9 Aspect Ratio, Responsive)

```
┌─────────────────────────────────────────────────────────────┐
│ [🏠Home] [⚙Settings] [📊Progress]      [Cart 🛒 3/5]  [❓Help] │  ← Top Bar
├─────────────────────────────────────────────────────────────┤
│                                                               │
│   ┌─────────────────────────────────────────┐               │
│   │       STORE VIEW (Main Scene)           │               │  ← Store Environment
│   │                                          │               │     (3D/2.5D rendered)
│   │   [Shelf with items]  [Clerk avatar]    │               │
│   │   [Player avatar]     [Shopping cart]   │               │
│   │                                          │               │
│   │   Items visible: 🍪 🧃 🍎 🥛            │               │
│   └─────────────────────────────────────────┘               │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│  [CLERK DIALOGUE]                                            │  ← Dialogue Box
│  "What would you like today?"                                │     (Text + AAC symbols)
│  [👋 Hi] [❓ What] [🍪 Cookie] [🧃 Juice]                   │
├─────────────────────────────────────────────────────────────┤
│  [AAC BOARD - Quick Access]                                  │  ← In-Game AAC
│  [👤I] [❤️want] [🍪cookie] [🙏please] [✓yes] [❌no]        │     (Core + Context vocab)
│  [📱 Open Full AAC Board]                                    │
├─────────────────────────────────────────────────────────────┤
│  CART INVENTORY:  🍪Cookie  🧃Juice  🍎Apple      [Checkout]│  ← Cart Display
└─────────────────────────────────────────────────────────────┘
```

**Responsive Design**:
- **Phone Portrait**: AAC board at bottom, store view compressed to top 50%
- **Tablet Landscape**: AAC board on side panel (persistent), store view larger
- **Desktop**: All elements visible simultaneously, no scrolling

### Accessibility Features (WCAG 2.1 AAA Target)

**Visual Accessibility**:
- ✅ **Contrast**: 7:1 text-to-background (AAA standard)
- ✅ **Color Independence**: Items labeled with text + symbols (not color-only)
- ✅ **Large Text**: 18pt minimum for body, 24pt for headings
- ✅ **Scalable UI**: Pinch-to-zoom on any screen element (200% max)
- ✅ **High Contrast Mode**: Black background, white text, neon item outlines

**Auditory Accessibility**:
- ✅ **Captions**: 100% of clerk dialogue captioned
- ✅ **Visual Alerts**: All audio has visual equivalent (e.g., item added = cart bounce)
- ✅ **Adjustable Volume**: Separate sliders (clerk, ambient, effects, AAC output)
- ✅ **Visual-Only Mode**: Game fully playable with sound muted

**Motor Accessibility**:
- ✅ **Touch Targets**: 60×60px minimum (exceeds 44px WCAG requirement)
- ✅ **Dwell Selection**: Eye gaze support (2-second dwell on item)
- ✅ **Switch Access**: Single-switch scanning (2s intervals, adjustable)
- ✅ **Voice Control**: Full game navigable via voice commands
- ✅ **Keyboard Navigation**: Tab, arrow keys, Enter, Space

**Cognitive Accessibility**:
- ✅ **Simple Language**: Clerk uses 1-2 sentence utterances, no complex vocabulary
- ✅ **Visual Schedules**: "3 more items to get" progress indicator
- ✅ **Undo Button**: "Remove from cart" option (mistake correction)
- ✅ **Pause Anytime**: Freeze game, take break, no penalty
- ✅ **Predictable Layout**: Store sections always in same location

**AAC-Specific Accessibility**:
- ✅ **Symbol Size**: Minimum 80×80px AAC symbols
- ✅ **Symbol Spacing**: 12px minimum between symbols (prevent accidental taps)
- ✅ **Page Navigation**: Clear "back" and "home" buttons on AAC board
- ✅ **Voice Output**: All AAC selections spoken aloud (TTS or recorded voice)
- ✅ **External AAC Sync**: Imports child's personal core vocabulary from device

---

## 5. CONTENT STRUCTURE

### Store Environments (5 Total)

#### Store 1: Neighborhood Grocery
**Environment**:
- Layout: 4 aisles (Produce, Dairy, Snacks, Beverages)
- Lighting: Bright, fluorescent (adjustable for sensory profile)
- Size: Medium (10-15 seconds to traverse)
- Music: Soft instrumental grocery store ambience

**Items** (30 total):
- Produce: Apple, banana, orange, grapes, carrot, broccoli (6)
- Dairy: Milk, cheese, yogurt, butter, eggs (5)
- Snacks: Cookies, chips, crackers, pretzels, granola bars (5)
- Beverages: Juice, water, soda, milk (4)
- Bakery: Bread, bagels, muffins, donuts (4)
- Other: Cereal, pasta, rice, canned soup, peanut butter, jam (6)

**Clerk**: "Ms. Garcia" - Female, 40s, friendly, patient, speaks slowly

#### Store 2: Toy Wonderland
**Environment**:
- Layout: Open floor plan with themed sections (Dolls, Cars, Puzzles, Stuffed Animals)
- Lighting: Warm, colorful spotlights on displays
- Size: Large (encourages exploration)
- Music: Playful, whimsical music box melodies

**Items** (25 total):
- Vehicles: Car, truck, train, airplane, boat (5)
- Dolls: Baby doll, action figure, dress-up doll (3)
- Stuffed Animals: Bear, dog, cat, bunny, dinosaur (5)
- Building: Blocks, Lego, magnetic tiles (3)
- Puzzles: 4pc, 12pc, 24pc puzzles (3)
- Outdoor: Ball, jump rope, bubbles, kite (4)
- Art: Crayons, markers, paint, coloring book (2)

**Clerk**: "Mr. Jamal" - Male, 30s, enthusiastic, uses animated gestures

#### Store 3: Sweet Bakery
**Environment**:
- Layout: Display case + seating area
- Lighting: Warm, cozy, sunset hues
- Size: Small, intimate
- Music: Soft jazz, French cafe style

**Items** (20 total):
- Pastries: Croissant, danish, muffin, scone (4)
- Cookies: Chocolate chip, sugar, oatmeal, snickerdoodle (4)
- Cakes: Cupcake, slice of cake, birthday cake (whole) (3)
- Breads: Baguette, sourdough, wheat bread, rolls (4)
- Drinks: Coffee, hot chocolate, tea, lemonade (4)
- Special: Custom cake (design your own - advanced)

**Clerk**: "Ms. Lily" - Female, 20s, soft-spoken, very patient, AAC-familiar

#### Store 4: Cool Cafe
**Environment**:
- Layout: Counter + tables, coffee bar visible
- Lighting: Hip, Edison bulbs, trendy decor
- Size: Medium
- Music: Indie acoustic, lo-fi beats

**Items** (18 total):
- Coffee: Latte, cappuccino, iced coffee, espresso (4)
- Tea: Green tea, chai, iced tea, herbal tea (4)
- Cold Drinks: Smoothie, milkshake, juice, soda, water (5)
- Food: Sandwich, salad, bagel, cookie, muffin (5)

**Clerk**: "Mx. Jordan" - Non-binary, 20s, friendly, inclusive language

#### Store 5: Fashion Boutique
**Environment**:
- Layout: Racks of clothes, fitting room area, accessory displays
- Lighting: Bright, modern, spotlights on featured items
- Size: Large
- Music: Upbeat pop (instrumental)

**Items** (25 total):
- Tops: T-shirt, sweater, hoodie, button-up (4)
- Bottoms: Jeans, shorts, skirt, leggings (4)
- Dresses: Casual dress, fancy dress, sundress (3)
- Outerwear: Jacket, coat, raincoat (3)
- Shoes: Sneakers, sandals, boots, dress shoes (4)
- Accessories: Hat, scarf, gloves, backpack, sunglasses (5)
- Colors: Each item available in 3-4 colors (descriptor practice)

**Clerk**: "Mr. Chen" - Male, 50s, professional, asks clarifying questions

### AAC Board Configuration

**Core Vocabulary Board** (Always Available):
```
┌────────────────────────────────────────────────────────┐
│  PEOPLE          │  ACTIONS         │  FEELINGS         │
│  [👤I]  [👥You]  │  [❤️want] [👀see] │  [😊happy] [😢sad] │
│  [👨Mom] [👩Dad]  │  [👍like] [❌no]  │  [😠mad] [😨scared]│
├────────────────────────────────────────────────────────┤
│  SOCIAL          │  REQUESTS        │  DESCRIPTORS      │
│  [🙏please]      │  [🆘help]        │  [🔴red] [🔵blue]  │
│  [🙏thank you]   │  [➕more]        │  [⬆️big] [⬇️little]│
│  [👋hi] [👋bye]  │  [✓yes] [✗stop]  │  [🔥hot] [❄️cold]  │
├────────────────────────────────────────────────────────┤
│  STORE ITEMS (Dynamic - Changes per Store)            │
│  [🍪cookie] [🧃juice] [🍎apple] [🥛milk] [🍌banana]    │
│  [🚗car] [🧸teddy] [⚽ball] [📚book] [🖍️crayons]       │
│  [Navigate to Full Vocabulary →]                       │
└────────────────────────────────────────────────────────┘
```

**Symbol Specifications**:
- Format: PNG with transparency
- Size: 120×120px (source), scales to device
- Style: SymbolStix, Widgit, or PCS (licensed)
- Labeling: Symbol + text label below
- Highlighting: Blue border when selected, yellow when building sentence

### Asset Specifications

**Environment Assets**:
- **Grocery Store**: 1920×1080px background, 5 layers (floor, shelves, ceiling, lighting, decorations)
- **Toy Store**: Same specs, vibrant colors
- **Bakery**: Warm lighting, cozy atmosphere
- **Cafe**: Modern, Instagram-worthy aesthetic
- **Clothing Store**: Professional retail environment

**Character Assets** (Clerks):
- 5 unique clerk characters
- 6 emotional expressions each (neutral, happy, thinking, confused, excited, tired)
- Animated: Idle, walk, talk, retrieve item, hand item, wave
- Specifications: 512×512px sprite sheets, 24fps animations
- Voice: Professional voice actors, 50-100 lines each

**Item Assets** (100+ total items across stores):
- Format: PNG, 256×256px
- Style: Photo-realistic with soft edges
- Variations: Some items have color variants (e.g., red apple, green apple)
- Interactive states: Normal, highlighted, in-cart, checked-out

**UI Assets**:
- AAC symbols: 150+ (core + context-specific)
- Buttons: Start, Pause, Settings, Help, Checkout, AAC Board
- Cart icon with counter badge
- Progress bars, checkmarks, arrows
- Dialogue bubbles (3 styles: clerk, child, system)

---

## 6. DATA TRACKING & ANALYTICS

### Per-Mand Data Collection

```json
{
  "mand_event_id": "MAND-2025-10-13-0156",
  "session_id": "SESS-4821",
  "user_id": "U-5678",
  "game_id": "requesting_skills_v1",
  "timestamp": "2025-10-13T14:22:18Z",

  "context": {
    "store_type": "grocery",
    "clerk_name": "Ms. Garcia",
    "item_requested": "cookie",
    "item_category": "snack",
    "item_was_visible": true,
    "items_in_cart_before": 2,
    "session_trial_number": 7
  },

  "mand_data": {
    "mand_method": "AAC_in_game",
    "mand_text": "I want cookie please",
    "mand_word_count": 4,
    "mand_included_politeness": true,
    "mand_included_descriptor": false,

    "aac_details": {
      "symbols_used": ["I", "want", "cookie", "please"],
      "navigation_path": ["core_vocab", "actions", "want", "foods", "cookie", "social", "please"],
      "navigation_errors": 0,
      "total_taps": 4
    },

    "temporal_data": {
      "latency_from_prompt_seconds": 6.2,
      "mand_duration_seconds": 8.4,
      "clerk_response_latency_seconds": 0.5
    },

    "prompting": {
      "prompt_level": "independent",
      "prompts_given": 0,
      "wait_time_before_prompt": 10.0,
      "errorless_teaching_active": false
    }
  },

  "outcome": {
    "mand_appropriate": true,
    "mand_resulted_in_reinforcer": true,
    "item_added_to_cart": true,
    "child_satisfied": true
  },

  "skills_practiced": [
    {
      "skill_code": "VB_MAPP_Mand_8",
      "skill_name": "Mands with 3+ words",
      "success": true
    },
    {
      "skill_code": "ABLLS_R_H2",
      "skill_name": "Requests with 2+ words",
      "success": true
    },
    {
      "skill_code": "ABLLS_R_H7",
      "skill_name": "Requests politely",
      "success": true
    }
  ],

  "behavioral_data": {
    "spontaneous_mand": true,
    "initiated_by_child": true,
    "required_clarification": false,
    "frustration_indicators": 0,
    "engagement_score": 9
  }
}
```

### Session Summary Data

```json
{
  "session_id": "SESS-4821",
  "user_id": "U-5678",
  "start_time": "2025-10-13T14:15:00Z",
  "end_time": "2025-10-13T14:28:45Z",
  "duration_minutes": 13.75,

  "stores_visited": ["grocery", "toy_store"],
  "total_items_requested": 9,
  "unique_items_requested": 8,
  "items_purchased": 9,

  "manding_metrics": {
    "total_mand_opportunities": 10,
    "successful_mands": 9,
    "unsuccessful_mands": 1,
    "mand_success_rate": 0.90,

    "spontaneous_mands": 6,
    "prompted_mands": 3,
    "spontaneity_rate": 0.67,

    "avg_mand_latency_seconds": 7.3,
    "avg_mand_word_count": 3.2,

    "mand_methods": {
      "AAC_in_game": 7,
      "AAC_external": 1,
      "voice": 1,
      "pointing": 0
    },

    "politeness_markers": {
      "used_please": 6,
      "used_thank_you": 8
    },

    "descriptors_used": 2
  },

  "skill_progress": {
    "skills_practiced": [
      {
        "skill_code": "VB_MAPP_Mand_5",
        "opportunities": 10,
        "successes": 9,
        "session_accuracy": 0.90,
        "cumulative_accuracy": 0.85,
        "trend": "improving"
      },
      {
        "skill_code": "VB_MAPP_Mand_8",
        "opportunities": 9,
        "successes": 7,
        "session_accuracy": 0.78,
        "cumulative_accuracy": 0.72,
        "trend": "stable"
      },
      {
        "skill_code": "ABLLS_R_H7",
        "opportunities": 10,
        "successes": 6,
        "session_accuracy": 0.60,
        "cumulative_accuracy": 0.58,
        "trend": "emerging"
      }
    ],

    "new_items_mastered": ["orange", "yogurt"],
    "manding_vocabulary_size": 32
  },

  "prompting_data": {
    "independent_mands": 6,
    "gestural_prompts": 2,
    "verbal_prompts": 1,
    "model_prompts": 0,
    "full_prompts": 0,
    "prompt_dependency_index": 0.33
  },

  "generalization_probes": {
    "novel_item_presented": "kiwi",
    "child_asked_question": true,
    "question_text": "What is that",
    "generalization_successful": true
  },

  "points_earned": 95,
  "badges_unlocked": ["Polite Requester Bronze"],
  "next_recommendation": {
    "focus_area": "Increase spontaneous manding",
    "suggested_level": 5,
    "reasoning": "Strong accuracy (90%) but only 67% spontaneous. Reduce prompts, increase wait time."
  }
}
```

### Parent Dashboard Visualizations

**Manding Progress Chart**:
```
Requesting Skills Progress (Last 14 Days)

100% ┤                                      ●───● MASTERED
 90% ┤                              ●───●───●
 80% ┤                      ●───●───●
 70% ┤              ●───●───●
 60% ┤      ●───●───●
 50% ┤  ●───●
     └───────┬───────┬───────┬───────┬───────┬───────→
          Day 1    Day 3    Day 6    Day 9   Day 12  Day 14

Skills:
● VB-MAPP Mand 5: Mands for 20 items → 85% (In Progress)
● VB-MAPP Mand 8: Mands with 3+ words → 72% (Emerging)
● ABLLS-R H7: Polite requesting → 58% (Emerging)
```

**Manding Vocabulary Growth**:
```
Items Child Can Request:
Week 1: ████████████ (12 items)
Week 2: ████████████████████ (20 items)
Week 3: ████████████████████████████ (26 items)
Week 4: ████████████████████████████████ (32 items)

New This Week: orange, yogurt, truck, puzzle, scarf
```

**Communication Method Breakdown**:
```
How Child Communicates (This Week):

AAC In-Game:   ████████████████░░░░  70% (42 mands)
External AAC:  ██████░░░░░░░░░░░░░░  15% (9 mands)
Voice:         ████░░░░░░░░░░░░░░░░  10% (6 mands)
Pointing:      ██░░░░░░░░░░░░░░░░░░   5% (3 mands)

Insight: Child prefers AAC! Consider encouraging voice when comfortable, but AAC is equally valid.
```

**Real-World Generalization Tracker**:
```
Skills Used Outside Game:

At Home:
✅ Requested snack from pantry (Mom reported)
✅ Asked for toy using AAC (Dad reported)
✅ Said "please" when asking for iPad (Grandma reported)

At School:
✅ Requested juice at lunch (Teacher reported)
⏳ Working on: Asking teacher for help (not yet observed)

In Community:
⏳ Practice needed: Ordering at restaurant
⏳ Practice needed: Asking for item at store
```

---

## 7. TECHNICAL IMPLEMENTATION

### Unity C# Code Examples

#### Main Game Manager

```csharp
using UnityEngine;
using System.Collections.Generic;
using System.Linq;
using Cysharp.Threading.Tasks;

public class RequestingSkillsManager : MonoBehaviour
{
    [Header("Game State")]
    public StoreType currentStore;
    public int currentLevel = 1;
    private SessionData currentSession;

    [Header("Store Configuration")]
    public StoreDatabase storeDatabase;
    public Transform storeEnvironmentRoot;

    [Header("Characters")]
    public PlayerAvatar playerAvatar;
    public ClerkController currentClerk;

    [Header("Shopping")]
    public ShoppingCart shoppingCart;
    public List<StoreItem> availableItems;
    private StoreItem currentlyRequestedItem;

    [Header("AAC System")]
    public AACBoardController aacBoard;
    public ExternalAACListener externalAACListener;

    [Header("Prompting")]
    public PromptingSystem promptingSystem;
    private float timeSinceLastPrompt = 0f;
    private int consecutiveIndependentMands = 0;

    [Header("Audio")]
    public AudioClip[] clerkGreetings;
    public AudioClip[] clerkResponses;
    public AudioClip successChime;

    void Start()
    {
        InitializeSession();
        LoadStore(StoreType.Grocery);
    }

    void InitializeSession()
    {
        currentSession = new SessionData
        {
            sessionId = System.Guid.NewGuid().ToString(),
            gameId = "requesting_skills_v1",
            userId = PlayerDataManager.Instance.CurrentUserId,
            timestampStart = System.DateTime.UtcNow,
            currentLevel = currentLevel,
            storesVisited = new List<string>()
        };

        // Register AAC listeners
        aacBoard.OnMandSubmitted += ProcessMand;
        externalAACListener.OnExternalMandReceived += ProcessMand;
    }

    async void LoadStore(StoreType storeType)
    {
        // Clear previous store
        foreach (Transform child in storeEnvironmentRoot)
        {
            Destroy(child.gameObject);
        }

        // Load new store
        StoreConfig store = storeDatabase.GetStore(storeType);
        GameObject storeEnvironment = Instantiate(store.environmentPrefab, storeEnvironmentRoot);

        // Load clerk
        currentClerk = Instantiate(store.clerkPrefab).GetComponent<ClerkController>();
        currentClerk.Initialize(store.clerkData);

        // Load items based on difficulty level
        availableItems = GetItemsForLevel(store, currentLevel);
        foreach (StoreItem item in availableItems)
        {
            SpawnItem(item);
        }

        // Update AAC board with store-specific vocabulary
        aacBoard.LoadContextVocabulary(storeType, availableItems);

        // Clerk greeting
        await UniTask.Delay(1000);
        await currentClerk.Speak(GetRandomGreeting());

        // Accessibility announcement
        AccessibilityManager.Instance.Announce($"Entered {store.name}. {availableItems.Count} items available.");

        // Record store visit
        currentSession.storesVisited.Add(storeType.ToString());

        // Start waiting for mand
        StartMandOpportunity();
    }

    List<StoreItem> GetItemsForLevel(StoreConfig store, int level)
    {
        int itemCount = Mathf.Min(5 + (level * 2), store.allItems.Count);
        return store.allItems.OrderBy(x => Random.value).Take(itemCount).ToList();
    }

    void SpawnItem(StoreItem item)
    {
        GameObject itemObject = Instantiate(item.itemPrefab, item.shelfPosition, Quaternion.identity);
        itemObject.GetComponent<InteractableItem>().Initialize(item, OnItemInteraction);
    }

    void StartMandOpportunity()
    {
        // Reset timer
        timeSinceLastPrompt = 0f;

        // Wait for child to mand
        InvokeRepeating(nameof(CheckForPrompt), 1f, 1f);
    }

    void CheckForPrompt()
    {
        timeSinceLastPrompt += 1f;

        // Determine prompt timing based on level and settings
        float promptDelay = SettingsManager.Instance.PromptDelay; // 3-10 seconds

        if (timeSinceLastPrompt >= promptDelay && !promptingSystem.IsPrompting)
        {
            PromptLevel nextPrompt = DeterminePromptLevel();
            promptingSystem.GivePrompt(nextPrompt, currentlyRequestedItem);
        }
    }

    PromptLevel DeterminePromptLevel()
    {
        // Adaptive prompting based on recent performance
        float recentAccuracy = GetRecentAccuracy();

        if (recentAccuracy >= 0.85f && consecutiveIndependentMands >= 3)
        {
            return PromptLevel.None; // Child is independent
        }
        else if (recentAccuracy >= 0.70f)
        {
            return PromptLevel.Gestural;
        }
        else if (recentAccuracy >= 0.50f)
        {
            return PromptLevel.Verbal;
        }
        else
        {
            return PromptLevel.Model;
        }
    }

    void OnItemInteraction(StoreItem item)
    {
        // Child showed interest in item (tapped, looked at it)
        currentlyRequestedItem = item;

        // Highlight item
        item.itemPrefab.GetComponent<Highlighter>().Enable();

        // Clerk moves closer (visual cue)
        currentClerk.MoveToPlayer();

        // Wait for mand
        StartMandOpportunity();
    }

    public async void ProcessMand(MandData mandData)
    {
        // Stop prompt checking
        CancelInvoke(nameof(CheckForPrompt));
        promptingSystem.ClearPrompts();

        // Calculate response latency
        float latency = timeSinceLastPrompt;

        // Validate mand
        bool mandAppropriate = ValidateMand(mandData, currentlyRequestedItem);

        // Record mand data
        RecordMandEvent(mandData, currentlyRequestedItem, mandAppropriate, latency);

        if (mandAppropriate)
        {
            await HandleSuccessfulMand(mandData, currentlyRequestedItem);
        }
        else
        {
            await HandleUnsuccessfulMand(mandData, currentlyRequestedItem);
        }
    }

    bool ValidateMand(MandData mandData, StoreItem targetItem)
    {
        // Check if mand matches item
        bool itemMatches = mandData.requestedItem.ToLower() == targetItem.name.ToLower();

        // Check if mand complexity meets level requirements
        bool complexityMet = mandData.wordCount >= GetRequiredMandLength(currentLevel);

        return itemMatches && complexityMet;
    }

    int GetRequiredMandLength(int level)
    {
        if (level <= 2) return 1; // Single word OK
        if (level <= 4) return 2; // "I want X"
        if (level <= 6) return 3; // "I want X please"
        return 4; // "May I have X please"
    }

    async UniTask HandleSuccessfulMand(MandData mandData, StoreItem item)
    {
        // Clerk responds positively
        string clerkResponse = GetPositiveClerkResponse(item.name);
        await currentClerk.Speak(clerkResponse);

        // Clerk retrieves item (animation)
        await currentClerk.RetrieveItem(item);

        // Item floats to shopping cart
        await item.itemPrefab.GetComponent<ItemAnimator>().MoveToCart(shoppingCart.transform);

        // Add to cart
        shoppingCart.AddItem(item);

        // Visual feedback
        ParticleEffects.Instance.PlayConfetti(shoppingCart.transform.position);
        AudioManager.Instance.PlaySound(successChime);

        // Skill tracker UI update
        SkillTrackerUI.Instance.ShowSkillPracticed("VB-MAPP Mand 5", success: true);

        // Check for prompting level adjustment
        if (mandData.promptLevel == PromptLevel.None)
        {
            consecutiveIndependentMands++;
        }
        else
        {
            consecutiveIndependentMands = 0;
        }

        // Accessibility announcement
        AccessibilityManager.Instance.Announce($"Great job! {item.name} added to cart. {shoppingCart.ItemCount} items in cart.");

        // Check if cart full or child wants to continue
        if (shoppingCart.ItemCount >= 5 || !MoreItemsAvailable())
        {
            await PromptCheckout();
        }
        else
        {
            await currentClerk.Speak("What else would you like?");
            StartMandOpportunity();
        }
    }

    async UniTask HandleUnsuccessfulMand(MandData mandData, StoreItem item)
    {
        // Gentle clarification
        string clarification = $"Did you say {mandData.requestedItem}? I want to make sure I get the right item.";
        await currentClerk.Speak(clarification);

        // Offer to try again
        await UniTask.Delay(2000);
        await currentClerk.Speak("Can you tell me again what you need?");

        // Provide higher-level prompt
        promptingSystem.GivePrompt(PromptLevel.Model, item);

        // Wait for retry
        StartMandOpportunity();
    }

    string GetPositiveClerkResponse(string itemName)
    {
        string[] templates = {
            $"Great job asking! Here's the {itemName}.",
            $"Perfect! I'll get that {itemName} for you.",
            $"You got it! One {itemName} coming up!",
            $"Excellent requesting! Here's your {itemName}."
        };
        return templates[Random.Range(0, templates.Length)];
    }

    async UniTask PromptCheckout()
    {
        await currentClerk.Speak("Ready to check out?");

        // Wait for confirmation
        bool confirmed = await WaitForConfirmation();

        if (confirmed)
        {
            await CheckoutSequence();
        }
        else
        {
            // Continue shopping
            StartMandOpportunity();
        }
    }

    async UniTask CheckoutSequence()
    {
        // Move to checkout counter
        await playerAvatar.MoveTo(Vector3.zero); // Checkout position

        // Clerk moves to register
        await currentClerk.MoveTo(new Vector3(1, 0, 0));

        // Scan items
        foreach (StoreItem item in shoppingCart.Items)
        {
            await currentClerk.ScanItem(item);
            await UniTask.Delay(500);
        }

        // Total
        float total = shoppingCart.CalculateTotal();
        await currentClerk.Speak($"Your total is ${total:F2}.");

        // Payment (simplified)
        await currentClerk.Speak("Thank you! Here's your receipt.");

        // Bag items
        await BagItems();

        // Farewell
        await currentClerk.Speak("Have a great day! Come back soon!");

        // Session complete
        await CompleteSession();
    }

    async UniTask CompleteSession()
    {
        currentSession.timestampEnd = System.DateTime.UtcNow;
        currentSession.totalMands = currentSession.mandEvents.Count;
        currentSession.successfulMands = currentSession.mandEvents.Count(m => m.appropriate);
        currentSession.mandSuccessRate = (float)currentSession.successfulMands / currentSession.totalMands;

        // Upload session data
        await APIClient.Instance.UploadSession(currentSession);

        // Show session summary
        await UIManager.Instance.ShowSessionSummary(currentSession);

        // Adaptive difficulty adjustment
        AdjustDifficulty();

        // Prompt to play again
        UIManager.Instance.ShowContinueDialog(
            onContinue: () => LoadStore(SelectNextStore()),
            onExit: () => SceneManager.LoadScene("MainMenu")
        );
    }

    void RecordMandEvent(MandData mandData, StoreItem targetItem, bool appropriate, float latency)
    {
        MandEvent mandEvent = new MandEvent
        {
            eventId = System.Guid.NewGuid().ToString(),
            sessionId = currentSession.sessionId,
            timestamp = System.DateTime.UtcNow,
            storeType = currentStore,
            itemRequested = mandData.requestedItem,
            targetItem = targetItem.name,
            mandMethod = mandData.method,
            mandText = mandData.text,
            wordCount = mandData.wordCount,
            promptLevel = mandData.promptLevel,
            appropriate = appropriate,
            latency = latency,
            skillsPracticed = GetRelevantSkills(mandData)
        };

        currentSession.mandEvents.Add(mandEvent);

        // Record to skill progress manager
        foreach (var skill in mandEvent.skillsPracticed)
        {
            SkillProgressManager.Instance.RecordAttempt(skill, appropriate);
        }
    }

    List<string> GetRelevantSkills(MandData mandData)
    {
        List<string> skills = new List<string>();

        // Mand for item
        skills.Add("VB_MAPP_Mand_5");
        skills.Add("ABLLS_R_H1");

        // Multi-word mand
        if (mandData.wordCount >= 2)
        {
            skills.Add("VB_MAPP_Mand_8");
            skills.Add("ABLLS_R_H2");
        }

        // Polite mand
        if (mandData.text.Contains("please") || mandData.text.Contains("thank"))
        {
            skills.Add("ABLLS_R_H7");
        }

        return skills;
    }

    void AdjustDifficulty()
    {
        float sessionAccuracy = (float)currentSession.successfulMands / currentSession.totalMands;
        float spontaneityRate = currentSession.mandEvents.Count(m => m.promptLevel == PromptLevel.None) / (float)currentSession.totalMands;

        if (sessionAccuracy >= 0.85f && spontaneityRate >= 0.70f && consecutiveIndependentMands >= 4)
        {
            currentLevel = Mathf.Min(10, currentLevel + 1);
            UIManager.Instance.ShowNotification($"Level Up! Now at Level {currentLevel}");
        }
        else if (sessionAccuracy < 0.60f)
        {
            currentLevel = Mathf.Max(1, currentLevel - 1);
            UIManager.Instance.ShowNotification($"Let's practice this level again with more support!");
        }
    }

    float GetRecentAccuracy()
    {
        int recentTrials = 5;
        var recentMands = currentSession.mandEvents.TakeLast(recentTrials);
        if (recentMands.Count() == 0) return 0.5f;
        return (float)recentMands.Count(m => m.appropriate) / recentMands.Count();
    }

    StoreType SelectNextStore()
    {
        // Rotate through stores
        List<StoreType> stores = new List<StoreType> { StoreType.Grocery, StoreType.ToyStore, StoreType.Bakery, StoreType.Cafe, StoreType.Clothing };
        return stores[(stores.IndexOf(currentStore) + 1) % stores.Count];
    }

    bool MoreItemsAvailable()
    {
        return availableItems.Count > shoppingCart.ItemCount;
    }

    async UniTask<bool> WaitForConfirmation()
    {
        // Wait for child to say "yes" or confirm via AAC
        // Implementation depends on input system
        await UniTask.Delay(5000); // Placeholder
        return true;
    }

    async UniTask BagItems()
    {
        // Animation: Items disappear into bag
        await UniTask.Delay(2000);
    }

    string GetRandomGreeting()
    {
        string[] greetings = {
            "Welcome! What can I help you find today?",
            "Hi there! I'm here to help. What would you like?",
            "Good morning! Take your time looking around.",
            "Hello! Let me know if you need anything!"
        };
        return greetings[Random.Range(0, greetings.Length)];
    }
}

// ==========================================
// DATA STRUCTURES
// ==========================================

[System.Serializable]
public class SessionData
{
    public string sessionId;
    public string gameId;
    public string userId;
    public System.DateTime timestampStart;
    public System.DateTime timestampEnd;
    public int currentLevel;
    public List<string> storesVisited;
    public List<MandEvent> mandEvents = new List<MandEvent>();
    public int totalMands;
    public int successfulMands;
    public float mandSuccessRate;
}

[System.Serializable]
public class MandEvent
{
    public string eventId;
    public string sessionId;
    public System.DateTime timestamp;
    public StoreType storeType;
    public string itemRequested;
    public string targetItem;
    public MandMethod method;
    public string mandText;
    public int wordCount;
    public PromptLevel promptLevel;
    public bool appropriate;
    public float latency;
    public List<string> skillsPracticed;
}

[System.Serializable]
public class MandData
{
    public string requestedItem;
    public string text;
    public int wordCount;
    public MandMethod method;
    public PromptLevel promptLevel;
    public List<string> aacSymbolsUsed;
}

public enum StoreType
{
    Grocery,
    ToyStore,
    Bakery,
    Cafe,
    Clothing
}

public enum MandMethod
{
    AAC_InGame,
    AAC_External,
    Voice,
    Pointing,
    Sign
}

public enum PromptLevel
{
    None = 0,         // Independent
    Natural = 1,      // Environmental cue
    Gestural = 2,     // Point, arrow
    Verbal = 3,       // "What do you want?"
    Model = 4,        // "You can say..."
    Full = 5          // Errorless (highlight correct response)
}

[System.Serializable]
public class StoreItem
{
    public string id;
    public string name;
    public string category;
    public Sprite icon;
    public GameObject itemPrefab;
    public Vector3 shelfPosition;
    public float price;
    public AACSymbol aacSymbol;
}

[System.Serializable]
public class StoreConfig
{
    public StoreType type;
    public string name;
    public GameObject environmentPrefab;
    public GameObject clerkPrefab;
    public ClerkData clerkData;
    public List<StoreItem> allItems;
}

[System.Serializable]
public class ClerkData
{
    public string name;
    public string voiceId;
    public List<AudioClip> greetings;
    public List<AudioClip> responses;
}
```

#### AAC Board Controller

```csharp
using UnityEngine;
using System.Collections.Generic;
using System.Linq;

public class AACBoardController : MonoBehaviour
{
    [Header("Configuration")]
    public AACSymbolDatabase symbolDatabase;
    public Transform coreVocabGrid;
    public Transform contextVocabGrid;
    public Transform sentenceDisplay;

    [Header("Current Sentence")]
    private List<AACSymbol> currentSentence = new List<AACSymbol>();
    public Text sentenceText;

    [Header("Events")]
    public System.Action<MandData> OnMandSubmitted;

    void Start()
    {
        LoadCoreVocabulary();
    }

    void LoadCoreVocabulary()
    {
        List<AACSymbol> coreSymbols = symbolDatabase.GetCoreVocabulary();
        foreach (var symbol in coreSymbols)
        {
            CreateSymbolButton(symbol, coreVocabGrid);
        }
    }

    public void LoadContextVocabulary(StoreType storeType, List<StoreItem> items)
    {
        // Clear previous context vocab
        foreach (Transform child in contextVocabGrid)
        {
            Destroy(child.gameObject);
        }

        // Load store-specific items
        foreach (var item in items)
        {
            CreateSymbolButton(item.aacSymbol, contextVocabGrid);
        }
    }

    void CreateSymbolButton(AACSymbol symbol, Transform parent)
    {
        GameObject buttonObj = Instantiate(symbolButtonPrefab, parent);
        AACSymbolButton button = buttonObj.GetComponent<AACSymbolButton>();
        button.Initialize(symbol, OnSymbolTapped);
    }

    public void OnSymbolTapped(AACSymbol symbol)
    {
        // Add symbol to sentence
        currentSentence.Add(symbol);
        UpdateSentenceDisplay();

        // Speak symbol (immediate feedback)
        TextToSpeech.Speak(symbol.text);

        // Check if sentence is complete
        if (IsSentenceComplete())
        {
            // Auto-submit after brief delay
            Invoke(nameof(SubmitMand), 0.5f);
        }
    }

    void UpdateSentenceDisplay()
    {
        sentenceText.text = string.Join(" ", currentSentence.Select(s => s.text));

        // Update visual sentence strip
        for (int i = 0; i < currentSentence.Count; i++)
        {
            // Display symbol icons in sentence strip
            sentenceDisplay.GetChild(i).GetComponent<Image>().sprite = currentSentence[i].icon;
        }
    }

    bool IsSentenceComplete()
    {
        // Heuristic: Has action + object
        bool hasAction = currentSentence.Any(s => s.type == SymbolType.Action);
        bool hasObject = currentSentence.Any(s => s.type == SymbolType.Object);

        return hasAction && hasObject && currentSentence.Count >= 2;
    }

    void SubmitMand()
    {
        if (currentSentence.Count == 0) return;

        // Build mand data
        string mandText = string.Join(" ", currentSentence.Select(s => s.text));
        string requestedItem = ExtractRequestedItem();

        MandData mandData = new MandData
        {
            requestedItem = requestedItem,
            text = mandText,
            wordCount = currentSentence.Count,
            method = MandMethod.AAC_InGame,
            promptLevel = PromptLevel.None, // Assumed independent unless prompted
            aacSymbolsUsed = currentSentence.Select(s => s.id).ToList()
        };

        // Trigger event
        OnMandSubmitted?.Invoke(mandData);

        // Clear sentence
        ClearSentence();
    }

    string ExtractRequestedItem()
    {
        // Find the object in sentence (last symbol of type Object)
        var objectSymbols = currentSentence.Where(s => s.type == SymbolType.Object);
        if (objectSymbols.Any())
        {
            return objectSymbols.Last().text;
        }
        return currentSentence.Last().text; // Fallback
    }

    public void ClearSentence()
    {
        currentSentence.Clear();
        UpdateSentenceDisplay();
    }

    public void BackspaceSymbol()
    {
        if (currentSentence.Count > 0)
        {
            currentSentence.RemoveAt(currentSentence.Count - 1);
            UpdateSentenceDisplay();
        }
    }
}

[System.Serializable]
public class AACSymbolButton : MonoBehaviour
{
    private AACSymbol symbol;
    private System.Action<AACSymbol> onTapCallback;

    public Image iconImage;
    public Text labelText;

    public void Initialize(AACSymbol sym, System.Action<AACSymbol> callback)
    {
        this.symbol = sym;
        this.onTapCallback = callback;

        iconImage.sprite = sym.icon;
        labelText.text = sym.text;
    }

    public void OnButtonTapped()
    {
        // Haptic feedback
        Handheld.Vibrate();

        // Visual feedback (scale pulse)
        transform.DOScale(Vector3.one * 1.1f, 0.1f).OnComplete(() =>
        {
            transform.DOScale(Vector3.one, 0.1f);
        });

        // Trigger callback
        onTapCallback?.Invoke(symbol);
    }
}
```

---

## 8. TESTING & VALIDATION

### Test Plan

**Phase 1: Internal Testing** (Days 1-2)
- [ ] AAC symbol navigation (in-game board)
- [ ] External AAC device connectivity (Proloquo2Go, TD Snap)
- [ ] Voice command recognition accuracy (>90% for common requests)
- [ ] Mand-to-item matching logic
- [ ] Prompting system (all 5 levels functional)
- [ ] Checkout sequence (item scanning, payment)
- [ ] Data logging (all mand events captured)
- [ ] Multi-store transitions (5 stores load correctly)

**Phase 2: Clinical Validation** (Days 3-5)
- [ ] **BCBA Review**: VB-MAPP mand alignment verified
- [ ] **SLP Review**: AAC vocabulary appropriate, functional
- [ ] **OT Review**: Motor accessibility (touch targets, timing)
- [ ] Skill progression matches developmental milestones
- [ ] Prompting hierarchy evidence-based
- [ ] Reinforcement schedule appropriate
- [ ] Data collection captures clinically meaningful metrics

**Phase 3: Accessibility Audit** (Day 6)
- [ ] WCAG 2.1 AA compliance (zero violations)
- [ ] Screen reader testing (NVDA, VoiceOver)
- [ ] Keyboard-only navigation
- [ ] Switch access (single-switch scanning)
- [ ] AAC device compatibility (3+ AAC apps tested)
- [ ] Voice command accuracy for diverse speech patterns

**Phase 4: Beta Family Testing** (Days 10-15)
- [ ] 8 families recruited (diverse communication levels)
- [ ] Daily playtesting (10-15 min sessions)
- [ ] Parent surveys (engagement, skill improvement)
- [ ] AAC device testing (real Proloquo2Go, TD Snap users)
- [ ] Generalization checks (parents report real-world requesting)
- **Success Threshold**: 75%+ families report skill improvement

### Unit Tests

```csharp
[Test]
public void TestMandValidation_Appropriate()
{
    // Arrange
    MandData mand = new MandData
    {
        requestedItem = "cookie",
        text = "I want cookie please",
        wordCount = 4,
        method = MandMethod.AAC_InGame
    };
    StoreItem targetItem = new StoreItem { name = "cookie" };
    int level = 5; // Requires 3+ words

    // Act
    bool valid = mandValidator.Validate(mand, targetItem, level);

    // Assert
    Assert.IsTrue(valid);
}

[Test]
public void TestPrompting_AdaptiveLevel()
{
    // Arrange
    PromptingSystem prompter = new PromptingSystem();
    float recentAccuracy = 0.55f; // Struggling

    // Act
    PromptLevel level = prompter.DeterminePromptLevel(recentAccuracy);

    // Assert
    Assert.AreEqual(PromptLevel.Verbal, level); // Should give verbal prompt
}

[Test]
public void TestAACBoard_SentenceBuilding()
{
    // Arrange
    AACBoardController aac = new AACBoardController();
    AACSymbol want = new AACSymbol { text = "want", type = SymbolType.Action };
    AACSymbol cookie = new AACSymbol { text = "cookie", type = SymbolType.Object };

    // Act
    aac.OnSymbolTapped(want);
    aac.OnSymbolTapped(cookie);

    // Assert
    Assert.AreEqual("want cookie", aac.GetCurrentSentence());
    Assert.IsTrue(aac.IsSentenceComplete());
}
```

---

## 9. POST-LAUNCH SUPPORT

### Week 1-2: Monitoring
- Monitor mand success rates (target >75%)
- Check AAC device connectivity issues
- Review voice recognition accuracy by accent/speech pattern
- Track session completion rates (target >80%)

### Month 2: Content Expansion
- Add 3 new stores (pharmacy, pet store, ice cream shop)
- Expand item library (150+ items total)
- Add "shopping list" mode (follow list of 5 items)
- Introduce money concepts (optional educational track)

### Month 3: Advanced Features
- Multiplayer mode (shop with sibling/peer)
- Real-world generalization prompts (parent-led activities)
- Video modeling (watch real child request at store)
- Errorless learning mode (for severe delays)

---

## 10. BUDGET & TIMELINE

**Development Timeline**: 20 days (4 weeks)

**Team**:
- Unity Developer: 100 hours
- BCBA Consultant: 16 hours
- SLP Consultant: 12 hours
- 2D Artist: 60 hours (5 stores, 100+ items, clerks)
- Voice Actors: 5 actors × 4 hours recording = 20 hours
- QA Engineer: 40 hours
- Accessibility Specialist: 12 hours

**Total**: ~260 hours
**Budget**: $26,000 - $35,000

---

## 11. SUCCESS METRICS

**Clinical Effectiveness**:
- ✅ 70%+ children increase manding vocabulary by 10+ items (6 weeks)
- ✅ 60%+ children achieve 80% spontaneous manding
- ✅ 75%+ parents report real-world requesting improvement

**Engagement**:
- ✅ 80%+ session completion rate
- ✅ 12+ minute average session duration
- ✅ 60%+ return for 3+ sessions in first week

**AAC Adoption**:
- ✅ 85%+ AAC users successfully use external AAC device
- ✅ 90%+ children use in-game AAC board independently
- ✅ 70%+ children prefer AAC over prompting for communication

---

**Document Status**: ✅ **COMPLETE - READY FOR CLINICAL REVIEW**

**Approval Required**:
- [ ] BCBA (VB-MAPP alignment)
- [ ] SLP (AAC implementation)
- [ ] Product Manager
- [ ] Lead Developer

---

**END OF GAME DESIGN DOCUMENT: REQUESTING SKILLS (VIRTUAL STORE)**
