# Game Design Document: Pattern Builder
## SkillBridge Educational Gaming Platform

**Game ID**: GAME-006
**Development Priority**: Month 2, Week 3
**Status**: Design Phase
**Document Version**: 1.0
**Last Updated**: October 13, 2025

---

## 1. EXECUTIVE SUMMARY

### Game Overview
**Pattern Builder** is a comprehensive pattern recognition and sequencing game designed to teach autistic children ages 4-8 to identify, copy, extend, and create patterns using visual elements (color, shape, size). This game builds critical pre-academic and cognitive flexibility skills through systematic instruction in AB patterns → ABC → AABB complex patterns → creative pattern design, establishing foundational skills for math, literacy, and executive function.

### Core Value Proposition
- **Mathematical Foundation**: Pattern recognition is the prerequisite for algebra, number sense, and problem-solving
- **Cognitive Flexibility Builder**: Switching between different pattern rules develops mental flexibility
- **Errorless Progression**: Scaffolded instruction ensures 85%+ success rate across all difficulty levels
- **Multiple Pattern Attributes**: Color, shape, size, and combination patterns teach multiple discrimination skills
- **Creative Expression**: Child-designed patterns provide agency, autonomy, and pride in creation
- **Daily Life Transfer**: Patterns exist everywhere (clothing, music, routines) - highly generalizable skill

### Key Innovation
Multi-dimensional pattern generation algorithm that systematically teaches pattern analysis through four progressive stages: (1) Copy static patterns, (2) Identify pattern rules, (3) Extend incomplete patterns, (4) Create original patterns from scratch. Each stage scaffolds the next, building metacognitive awareness of "what makes a pattern a pattern."

---

## 2. LEARNING OBJECTIVES & CLINICAL FRAMEWORK

### Primary Skills (ABLLS-R & VB-MAPP Framework)

#### Skill 1: Visual Pattern Recognition (ABLLS-R G20-G25)
**Clinical Description**: Child demonstrates ability to identify and extend visual patterns with 2-5 element sequences, indicating understanding of repetition, sequence, and rule-following.

**Developmental Sequence**:
1. **G20 - Simple AB Patterns** (Ages 4-5): Copy and extend 2-element alternating patterns (red-blue-red-blue)
   - Success Criteria: 8/10 correct AB pattern completions
   - Mastery: 85% accuracy across 3 sessions
   - Typical Development: Emerges 4-5 years

2. **G21 - ABC Patterns** (Ages 5-6): Copy and extend 3-element repeating patterns (circle-square-triangle)
   - Success Criteria: 12/15 correct ABC pattern completions
   - Mastery: 80% accuracy across 3 sessions
   - Typical Development: 5-6 years

3. **G22 - Complex Patterns** (Ages 6-7): AABB, ABB, AAB patterns with 4+ elements
   - Success Criteria: 15/20 correct complex pattern completions
   - Mastery: 75% accuracy across 3 sessions
   - Typical Development: 6-7 years

4. **G23 - Growing Patterns** (Ages 7-8): Patterns that change (1, 2, 1, 2, 2, 1, 2, 2, 2...)
   - Success Criteria: 10/15 correct growing pattern predictions
   - Mastery: 70% accuracy across 3 sessions
   - Typical Development: 7-8 years

5. **G24 - Multi-Attribute Patterns** (Ages 7-8): Patterns combining color + shape + size simultaneously
   - Success Criteria: 12/18 correct multi-attribute completions
   - Mastery: 70% accuracy across 3 sessions
   - Typical Development: 7-8 years

6. **G25 - Pattern Creation** (Ages 8+): Design own repeating patterns following specific rules
   - Success Criteria: 5/7 valid original patterns created
   - Mastery: 70% accuracy (valid patterns) across 3 sessions
   - Typical Development: 8+ years

#### Skill 2: Sequencing & Order (ABLLS-R H15)
**Clinical Description**: Child can arrange items in a predetermined sequence, demonstrating understanding of order, position, and "what comes next" reasoning.

**Teaching Progression**:
1. **Phase 1**: Copy model sequence (4 items) with physical prompting
2. **Phase 2**: Extend sequence given first 3 items (predict 4th)
3. **Phase 3**: Identify which item "doesn't belong" (pattern error detection)
4. **Phase 4**: Sequence 6+ items following abstract rule

**Mastery Criteria**:
- 80% accuracy without prompting
- Response latency <15 seconds per item placement
- Generalization: Can apply sequencing to different object types

#### Skill 3: Cognitive Flexibility (VB-MAPP Listener 14, PEAK-DT 5C)
**Clinical Description**: Child can switch between different pattern rules (e.g., color patterns vs. shape patterns) without perseveration, indicating mental flexibility and rule-switching ability.

**Flexibility Targets**:
- **Dimension Switching**: Color pattern → Shape pattern → Size pattern (within same session)
- **Rule Complexity**: Simple AB → Complex AABB → Multi-attribute (ABC with color+shape)
- **Error Recovery**: Self-correct after incorrect pattern continuation
- **Metacognitive Awareness**: Verbalize pattern rule ("It goes red-blue-red-blue!")

**Assessment**:
- Flexibility Score: Number of successful dimension switches per session
- Perseveration Tracking: Instances where child continues old pattern rule despite new instruction
- Rule Identification: Can child state the pattern rule before extending it?

### Secondary Skills (Incidental Learning)

#### Mathematical Pre-Requisites
- **Number Sense**: Counting pattern elements (1st, 2nd, 3rd position)
- **Prediction**: Anticipating what comes next based on rule
- **Algebraic Thinking**: Understanding variables (X-Y-X-Y where X and Y can be any value)
- **Problem Solving**: Figuring out "what's the rule?" from examples

**Connection to Future Math Skills**:
- Skip counting (2, 4, 6, 8... is a growing pattern)
- Multiplication tables (repeated addition patterns)
- Functions (input-output patterns: f(x) = x + 2)

#### Executive Function
- **Working Memory**: Hold pattern rule in mind while building
- **Planning**: Strategize which element to place next
- **Inhibitory Control**: Suppress incorrect pattern choices
- **Set Shifting**: Switch between color, shape, size rules
- **Self-Monitoring**: Detect own errors and self-correct

#### Visual-Spatial Skills
- **Positional Awareness**: Left-to-right sequence (literacy pre-skill)
- **Spatial Relations**: Understanding "before" and "after" in sequence
- **Visual Memory**: Recall model pattern after brief viewing
- **Figure-Ground**: Isolate relevant pattern from background

### Clinical Rationale (BCBA Perspective)

**Why Patterns Matter**:
1. **Universal Academic Skill**: Patterns underlie reading (letter patterns, rhyming), math (number patterns, operations), and science (experimental patterns)
2. **Cognitive Flexibility Crucible**: Pattern tasks require constant mental shifting - a core deficit area for many autistic children
3. **Error Detection Training**: Spotting "what doesn't belong" builds critical self-monitoring skills
4. **Predictive Thinking**: Patterns teach "if-then" reasoning essential for problem-solving
5. **Creative Expression**: Open-ended pattern creation builds agency, autonomy, and pride

**Evidence Base**:
- Pattern recognition at age 5 predicts math achievement at age 11 (Rittle-Johnson et al., 2017)
- Explicit pattern instruction improves executive function in autistic children (Miller et al., 2019)
- Visual patterns more accessible than auditory for autistic learners (Sahyoun et al., 2010)
- Errorless teaching of pattern extension: 80-90% success rate (Jerome & Sturmey, 2008)

**Why This Game Order (Month 2)?**
- Requires prerequisite skills: Matching (Game 1), Sorting (implied in Game 1), Attention (all prior games)
- More abstract than simple matching - child must discern underlying rule
- Cognitive flexibility demands higher executive function than earlier games
- Appropriate challenge after mastering Month 1 games

---

## 3. CORE GAMEPLAY MECHANICS

### Primary Mechanic: Drag-and-Build Pattern Sequences

#### User Flow (Complete Interaction)
```
1. GAME START
   ↓
2. TUTORIAL (First-time users only)
   - Animated sequence shows: "Patterns repeat!"
   - Simple AB pattern demonstrated: Red-Blue-Red-Blue
   - Voice-over: "This pattern goes red, blue, red, blue. It repeats!"
   - Child taps to place next element (errorless: only blue available)
   - Success: "You found the pattern!"
   ↓
3. MODE SELECTION (unlocked progressively)
   - [COPY MODE] - Copy the pattern you see (beginner)
   - [EXTEND MODE] - Continue the pattern (intermediate)
   - [FIND RULE MODE] - What's the pattern? (advanced)
   - [CREATE MODE] - Make your own pattern! (mastery)
   ↓
4. DIFFICULTY SELECTION (within mode)
   - Level 1-3: AB patterns (2 elements, color only)
   - Level 4-6: ABC patterns (3 elements, color + shape)
   - Level 7-9: Complex AABB, ABB patterns (4+ elements)
   - Level 10-12: Multi-attribute patterns (color + shape + size)
   - Level 13-15: Growing/changing patterns
   ↓
5. LEVEL BEGINS: COPY MODE EXAMPLE
   ┌─────────────────────────────────────────┐
   │  MODEL PATTERN (Top, reference area)    │
   │  🔴 🔵 🔴 🔵 [Complete pattern shown]    │
   └─────────────────────────────────────────┘

   ┌─────────────────────────────────────────┐
   │  YOUR PATTERN (Middle, work area)       │
   │  [_] [_] [_] [_] [Empty spaces to fill] │
   └─────────────────────────────────────────┘

   ┌─────────────────────────────────────────┐
   │  ELEMENT PALETTE (Bottom, drag source)  │
   │  🔴 🔵 🟢 🟡 [Available elements]        │
   └─────────────────────────────────────────┘

   Instruction: "Copy the pattern above!"
   ↓
6. CHILD INTERACTION
   - Taps/clicks element from palette → Element lifts, scales 110%
   - Drags to work area slot → Slot glows if correct match
   - Drops element:
     * CORRECT: Element snaps into place, sparkle effect, "Yes!"
     * INCORRECT: Element returns to palette, gentle "boop", slot highlights correct element type
   - Continues until all slots filled
   ↓
7. PATTERN VALIDATION
   - Game checks: Does child's pattern match model exactly?
   - If YES:
     * CELEBRATION: Pattern animates (pulses in sequence)
     * Voice: "You copied the pattern perfectly!"
     * Star award + points (+15 per correct element)
     * Pattern Rule Revealed: "This is a red-blue pattern. It goes AB, AB, AB!"
   - If NO (has errors):
     * Highlight errors gently: Wrong elements pulse slowly
     * Voice: "Hmm, check the ones that are glowing"
     * Allow fix: Child can replace incorrect elements
     * Partial credit: Points for correct elements only
   ↓
8. MODE VARIATIONS:

   EXTEND MODE:
   ┌─────────────────────────────────────────┐
   │  MODEL PATTERN (partial, first 3 shown) │
   │  🔴 🔵 🔴 [? ?] ← Predict next 2         │
   └─────────────────────────────────────────┘
   Child must figure out pattern rule and extend it.

   FIND RULE MODE:
   ┌─────────────────────────────────────────┐
   │  🔴 🔵 🔴 🔵 🔴 🔵                        │
   │                                          │
   │  What's the pattern rule?               │
   │  [Red-Blue] [Red-Red-Blue] [Blue-Red]  │
   │  (Multiple choice, tap correct rule)    │
   └─────────────────────────────────────────┘
   Builds metacognitive awareness of pattern rules.

   CREATE MODE:
   ┌─────────────────────────────────────────┐
   │  YOUR PATTERN (Empty canvas)            │
   │  [_] [_] [_] [_] [_] [_]                │
   │                                          │
   │  Make a repeating pattern!              │
   │  🔴 🔵 🟢 🟡 (Palette below)              │
   └─────────────────────────────────────────┘
   Child designs own pattern. Game validates:
   - Does it repeat at least twice?
   - Is there a discernible rule?
   - Award: "Pattern Creator" badge
   ↓
9. COGNITIVE FLEXIBILITY CHALLENGE (Every 5 levels)
   - Surprise dimension switch: "Now let's try SHAPE patterns!"
   - Same mechanics, different attribute (color → shape → size)
   - Tracks: Can child switch rules? Perseveration score?
   ↓
10. PROGRESSION DECISION
   - If 85%+ accuracy → Next level (more complex patterns)
   - If 70-84% accuracy → Repeat level with new pattern content
   - If <70% accuracy → Drop to easier level OR enable errorless mode
   ↓
11. MASTERY CELEBRATION (After completing all 15 levels)
   - "Pattern Master" certificate unlocked
   - Parent dashboard shows: "Child can create complex patterns!"
   - Unlock: Pattern Art Studio (free-form pattern design tool)
```

### Advanced Mechanics

#### Pattern Types Progression

**Level 1-3: AB Patterns (Color)**
- Red-Blue-Red-Blue
- Yellow-Green-Yellow-Green
- Pattern length: 4-6 elements
- Success: 85%+ accuracy over 3 trials

**Level 4-6: ABC Patterns (Color + Shape)**
- Circle-Square-Triangle, repeat
- Red-Blue-Green, repeat
- Pattern length: 6-9 elements
- Success: 80%+ accuracy

**Level 7-9: Complex Patterns (AABB, ABB, AAB)**
- Red-Red-Blue-Blue (AABB)
- Circle-Square-Square (ABB)
- Big-Big-Small (AAB with size)
- Pattern length: 8-12 elements
- Success: 75%+ accuracy

**Level 10-12: Multi-Attribute Patterns**
- Red-Circle, Blue-Square, Red-Circle (color AND shape)
- Big-Small-Small (size), each also has color
- Pattern length: 9-15 elements
- Success: 70%+ accuracy

**Level 13-15: Growing/Changing Patterns**
- 1-2-1-2-2-1-2-2-2 (Fibonacci-like)
- Small-Medium-Large-Small-Medium-Large (ascending)
- Color gradient patterns (red → orange → yellow)
- Pattern length: 12-18 elements
- Success: 70%+ accuracy

#### Error Analysis & Adaptive Hints

**Error Type 1: Random Placement (No Pattern Understanding)**
- Detected: Child places elements without regard to model
- Response: Switch to errorless mode - only correct element available
- Voice: "Let's build this pattern together!"

**Error Type 2: Rule Confusion (Uses Wrong Attribute)**
- Detected: Child uses color pattern when task is shape pattern
- Response: Highlight relevant attribute: "Look at the SHAPES, not the colors"
- Visual aid: Gray out irrelevant attribute

**Error Type 3: Off-by-One Errors (Slight Sequence Mistake)**
- Detected: Pattern is 90% correct but offset by 1 position
- Response: Gentle highlight of error location only
- Voice: "Check this one - what comes after red?"

**Error Type 4: Perseveration (Continues Old Pattern)**
- Detected: Child uses previous level's pattern rule on new level
- Response: "New pattern! This one is different. Look carefully."
- Visual: Flash model pattern to re-engage attention

#### Accessibility Modes

**Colorblind Mode**:
- Patterns use high-contrast colors + patterns/symbols
- Red has vertical stripes, Blue has dots, Green has horizontal stripes
- Shape-only patterns emphasized for severe colorblindness

**Motor Challenge Mode** (Fine Motor Difficulty):
- Larger drag targets (120px vs. 80px)
- Snap-to-slot assistance (magnetic attraction)
- Alternative: Tap-to-select, tap-to-place (no dragging required)
- Voice selection: "Red... place" (voice command)

**Cognitive Support Mode** (Lower Executive Function):
- Visual checklist shows: Element 1 ✓, Element 2 ✓, Element 3 (current)
- Highlight next slot to fill (predictable left-to-right sequence)
- Model pattern stays visible (no memory demands)
- Undo button allows error correction without penalty

---

## 4. DIFFICULTY PROGRESSION SYSTEM

### Adaptive Difficulty Engine

#### Difficulty Parameters (8 Variables)

1. **Pattern Complexity**: AB → ABC → AABB → AAB/ABB → ABCD → Multi-attribute → Growing
2. **Pattern Length**: 4 elements → 6 → 8 → 12 → 16 → 20 elements
3. **Number of Attributes**: Color only → Shape only → Size only → Color+Shape → Color+Shape+Size
4. **Model Visibility**: Always visible → Timed viewing (memory challenge) → Partial (extend) → None (create)
5. **Element Options**: 2 choices → 3 → 4 → 6 → 8 (more distractors)
6. **Mode**: Copy (easiest) → Extend → Identify Rule → Create (hardest)
7. **Flexibility Demands**: Single attribute (entire session) → Switch once → Switch every 3 levels
8. **Feedback Specificity**: Highlight exact error → Highlight zone → General "check your work"

#### Dynamic Adjustment Algorithm

```python
# Pseudocode for adaptive pattern difficulty

def adjust_pattern_difficulty(session_performance):
    accuracy = session_performance['correct_patterns'] / session_performance['total_patterns']
    avg_time_per_pattern = session_performance['duration'] / session_performance['patterns_completed']
    flexibility_score = session_performance['successful_dimension_switches'] / session_performance['switch_attempts']

    # MASTERY - Increase Difficulty
    if accuracy >= 0.85 and avg_time_per_pattern < 45.0 and flexibility_score >= 0.70:
        if consecutive_successes >= 3:
            current_level += 1
            increase_complexity()  # More elements, new pattern type, or attribute switch

    # STRUGGLING - Decrease Difficulty
    elif accuracy < 0.70 or perseveration_detected or avg_time_per_pattern > 90.0:
        if consecutive_struggles >= 2:
            current_level = max(1, current_level - 1)
            simplify()  # Fewer elements, simpler pattern, single attribute
            enable_errorless_hints()

    # OPTIMAL CHALLENGE - Maintain Level
    else:  # 70-84% accuracy, moderate pace, some flexibility
        current_level = current_level  # Stay in Zone of Proximal Development
        vary_content()  # Different colors/shapes, keep same pattern type

def increase_complexity():
    # Priority order: Pattern type > Length > Attributes > Distractors
    if pattern_type == 'AB' and mastered:
        pattern_type = 'ABC'
    elif pattern_type == 'ABC' and mastered:
        pattern_type = random.choice(['AABB', 'ABB', 'AAB'])
    elif pattern_length < 20:
        pattern_length += 4
    elif num_attributes == 1:
        num_attributes = 2  # Add second attribute
    elif distractor_count < 4:
        distractor_count += 2

def simplify():
    if pattern_type in ['AABB', 'ABB', 'AAB']:
        pattern_type = 'ABC'
    elif pattern_type == 'ABC':
        pattern_type = 'AB'
    if pattern_length > 4:
        pattern_length -= 2
    if num_attributes > 1:
        num_attributes = 1  # Single attribute only
    distractor_count = max(0, distractor_count - 1)

def detect_perseveration(current_pattern_rule, child_response_pattern):
    """
    Checks if child is using previous pattern rule on new task.
    """
    if child_response_pattern == previous_level_pattern_rule:
        if child_response_pattern != current_pattern_rule:
            return True  # Perseveration detected
    return False
```

### Level Progression Chart

| Level | Mode | Pattern Type | Length | Attributes | Distractors | Target Age | Est. Time |
|-------|------|-------------|---------|------------|-------------|------------|-----------|
| **1** | Copy | AB (Color) | 4 | 1 (color) | 0 | 4 years | 3-4 min |
| **2** | Copy | AB (Color) | 6 | 1 (color) | 1 | 4-5 years | 4-5 min |
| **3** | Extend | AB (Color) | 4 | 1 (color) | 2 | 5 years | 5-6 min |
| **4** | Copy | ABC (Color) | 6 | 1 (color) | 2 | 5 years | 5-6 min |
| **5** | Copy | ABC (Shape) | 6 | 1 (shape) | 2 | 5 years | 5-6 min |
| **6** | Extend | ABC (Color) | 9 | 1 (color) | 3 | 5-6 years | 6-7 min |
| **7** | Copy | AABB (Color) | 8 | 1 (color) | 3 | 6 years | 6-8 min |
| **8** | Copy | ABB (Shape) | 9 | 1 (shape) | 3 | 6 years | 7-8 min |
| **9** | Extend | AABB (Color) | 12 | 1 (color) | 4 | 6-7 years | 8-9 min |
| **10** | Copy | AB (Color+Shape) | 8 | 2 (both) | 4 | 6-7 years | 8-10 min |
| **11** | Copy | ABC (Color+Shape) | 9 | 2 (both) | 4 | 7 years | 9-10 min |
| **12** | Extend | ABC (Color+Shape) | 12 | 2 (both) | 5 | 7 years | 10-12 min |
| **13** | Identify | Growing (1-2-1-2-2...) | 15 | 1 (size) | N/A | 7-8 years | 10-12 min |
| **14** | Extend | Multi-attr (Color+Shape+Size) | 15 | 3 (all) | 6 | 8 years | 12-15 min |
| **15** | Create | Original (any valid) | 12+ | 2+ (child's choice) | N/A | 8+ years | 10-15 min |

**Progressive Challenge Examples**:

**Level 1 (Beginner - Copy AB Color)**:
- Model: 🔴 🔵 🔴 🔵
- Child copies exactly
- Only red and blue available in palette
- Success: 85%+ of children succeed

**Level 5 (Intermediate - Copy ABC Shape, Flexibility)**:
- Model: ⭐ ⬜ 🔺 ⭐ ⬜ 🔺
- Child copies shape pattern (colors irrelevant)
- Tests: Can child ignore color and focus on shape?
- Distractors: Other shapes available (○ ⬛ ⬢)

**Level 10 (Advanced - Copy Multi-Attribute AB)**:
- Model: [Red Circle] [Blue Square] [Red Circle] [Blue Square]
- Pattern rule: BOTH color AND shape must match
- Complex: Child must track two attributes simultaneously
- Distractors: [Red Square] [Blue Circle] (partial matches)

**Level 13 (Expert - Identify Growing Pattern)**:
- Model: Small-Medium-Small-Medium-Medium-Small-Medium-Medium-Medium
- Question: "What comes next?"
- Options: Small | Medium-Small | Medium | Medium-Medium
- Cognitive load: Must identify growing rule (Fibonacci-like)

**Level 15 (Mastery - Create Original)**:
- Empty canvas: [_] [_] [_] [_] [_] [_] [_] [_]
- Instruction: "Make your own repeating pattern using colors AND shapes!"
- Palette: All colors, all shapes available
- Validation: Pattern must repeat at least twice with consistent rule
- Celebration: "You're a Pattern Designer!"

---

## 5. SCAFFOLDING & PROMPTING SYSTEM

### Prompting Hierarchy (Least-to-Most Support)

#### Level 0: Independent (Goal State)
- No prompts, hints, or visual aids
- Child analyzes pattern and extends/copies independently
- Data recorded as "independent pattern completion"
- Target: 80%+ of attempts independent by Level 10

#### Level 1: Observational Prompt (Minimal Support)
- After 30 seconds of inactivity: Gentle reminder animation
  - Model pattern pulses briefly (draws attention)
  - Voice: "Look at the pattern carefully. What do you see?"
  - No specific guidance, just re-engagement

#### Level 2: Attribute Highlighting (Mild Support)
- After 1 incorrect attempt OR 45 seconds inactivity:
  - Relevant attribute highlighted in model
  - Color pattern: Model elements gain slight glow
  - Shape pattern: Shapes pulse, colors gray out
  - Voice: "Look at the COLORS" or "Look at the SHAPES"
  - Shows WHAT to focus on, not WHAT to place

#### Level 3: Next Element Hint (Moderate Support)
- After 2 incorrect attempts OR 60 seconds:
  - Highlight next empty slot in work area
  - Show silhouette of correct element (shape outline, no color)
  - OR: Multiple choice - narrow options to 2 instead of 4
  - Voice: "What color comes next in this pattern?"

#### Level 4: Correct Element Reveal (High Support)
- After 3 incorrect attempts OR child exhibits frustration:
  - Correct element in palette glows brightly
  - Arrow points from correct element to correct slot
  - Voice: "Try the red circle! It goes here."
  - Child still performs drag action (not fully automatic)

#### Level 5: Full Physical Prompt / Errorless (Maximum Support)
- After 4 incorrect attempts OR child disengagement:
  - Correct element auto-highlights and slowly animates toward slot
  - Child can intercept and complete, or game completes if no interaction
  - Full celebration still plays (success is success!)
  - Voice: "Let's build this pattern together! Red circle goes here."

### Prompt Fading Strategy

**Session-by-Session Fading Plan**:
```
Session 1-2: Full prompts available, used liberally
  - 60% prompted responses acceptable
  - Goal: Build confidence, prevent frustration

Session 3-4: Increase wait time before prompting
  - 30 → 45 seconds before Level 1 prompt
  - 45 → 60 seconds before Level 2
  - 40-50% prompted responses

Session 5-6: Skip Level 5 prompts unless severe struggle
  - Max Level 4 support
  - 30-40% prompted responses

Session 7-10: Skip Level 4, max Level 3
  - 20-30% prompted responses
  - Fading toward independence

Session 11+: Independent expected, Level 1-2 only if needed
  - 10-20% prompted responses
  - Mastery-level independence
```

**Mastery Criterion**:
- 80% independent (no prompts) across 3 consecutive sessions
- Response latency <20 seconds per pattern element
- Flexibility: Can switch between attributes (color/shape/size) with <2 errors
- Generalization: Skills transfer to new pattern types not explicitly taught

### Errorless Teaching Mode (Optional Setting)

For children with:
- History of frustration or task refusal with pattern tasks
- Severe executive function deficits (difficulty with "what comes next")
- Attention difficulties (cannot sustain focus on model pattern)

**Errorless Mode Features**:
- Enable via Settings → "Support Level" → "Maximum Guidance"
- Only correct element available in palette at any given moment
  - All other elements grayed out or hidden
  - "Hot potato" method: Only one option possible
- Model pattern remains highlighted continuously
- Next slot to fill pulses gently
- Voice guidance for every placement: "Next, we need blue"
- Gradually fade over weeks:
  - Week 1-2: Full errorless (1 option)
  - Week 3-4: 2 options (correct + 1 distractor)
  - Week 5+: Standard mode with prompting available

---

## 6. USER EXPERIENCE DESIGN

### Visual Design Language

#### Art Style: Bright, Geometric, Playful
- **Pattern Elements**: Bold, saturated colors with clean edges
- **Shapes**: Simple geometric (circle, square, triangle, star, hexagon)
- **Sizes**: Visually distinct (small 40px, medium 70px, large 110px)
- **Layout**: Clean white/light gray background - patterns pop visually
- **Animations**: Smooth, satisfying snaps and pulses (not distracting)

#### Color Palette Specifications

**Primary Pattern Colors** (High Saturation, Clear Distinction):
- **Red**: #E74C3C (RGB 231, 76, 60) - Bright red
- **Blue**: #3498DB (RGB 52, 152, 219) - Sky blue
- **Yellow**: #F1C40F (RGB 241, 196, 15) - Sunflower yellow
- **Green**: #2ECC71 (RGB 46, 204, 113) - Emerald green
- **Orange**: #E67E22 (RGB 230, 126, 34) - Bright orange
- **Purple**: #9B59B6 (RGB 155, 89, 182) - Amethyst purple
- **Pink**: #FFC0CB (RGB 255, 192, 203) - Soft pink
- **Brown**: #8B4513 (RGB 139, 69, 19) - Saddle brown

**UI Colors** (Neutral, Non-Distracting):
- Background: #F8F9FA (off-white)
- Work Area Slots: #FFFFFF (white) with #CED4DA border
- Palette Background: #E9ECEF (light gray)
- Correct Glow: #2ECC71 (green, 30% opacity)
- Error Glow: #E67E22 (orange, 20% opacity) - NOT red (non-punitive)

#### Shape Library (5 Basic + 3 Advanced)

**Basic Shapes** (Level 1-9):
1. **Circle**: Perfect round, universally recognized
2. **Square**: Right angles, stable
3. **Triangle**: Equilateral, point-up
4. **Star**: 5-point star, playful
5. **Rectangle**: Horizontal orientation

**Advanced Shapes** (Level 10+):
6. **Hexagon**: 6-sided, more complex
7. **Diamond**: Rotated square (tests rotation understanding)
8. **Heart**: Friendly, distinct

**Shape Specifications**:
- Format: SVG vector (infinitely scalable)
- Fill: Solid color (no gradients in basic mode)
- Stroke: 2px white outline (makes edges clear)
- Size consistency: All shapes fit in same bounding box

#### Size Variations (3 Levels)
- **Small**: 40×40px bounding box
- **Medium**: 70×70px bounding box (default)
- **Large**: 110×110px bounding box

#### Sensory Profile Adaptations

**Calm Profile** (Low Sensory Stimulation):
- Pastel colors (reduce saturation by 50%)
- Matte textures, no glow effects
- Minimal animations (simple fade-ins, no bounces)
- Quiet sound effects only (soft chime)
- No background music
- Slower transition speeds (0.5x)

**Energetic Profile** (High Sensory Stimulation):
- Vibrant, saturated colors (+20% saturation)
- Glossy, shiny surfaces with subtle gradients
- Abundant celebration effects (confetti, stars, sparkles)
- Upbeat background music (xylophone, ukulele)
- Fast, bouncy animations (1.2x speed)
- Enthusiastic voice-overs

**Focused Profile** (Distraction-Free):
- Monochrome patterns (black/white/gray) - shape/size only
- Zero decorative elements (pure workspace)
- No background elements
- Text instructions only (no voice)
- Minimal sound effects (only essential feedback)
- Large, clear spacing between elements

**Custom Profile**:
- Sliders for: Color saturation, Animation speed, Sound volume, Visual effects density
- Save per-child settings
- Quick profile toggle during gameplay (settings menu)

#### Animation Principles

**Element Animations**:
- **Pickup**: Scale to 110%, slight rotation (3°), shadow grows
- **Drag**: Element follows touch/mouse with 60ms lag (smooth feel)
- **Snap to Slot (Correct)**: Magnetic pull, settle animation (0.2s ease-out), pulse once
- **Return to Palette (Incorrect)**: Elastic bounce back (0.3s), no harsh movement
- **Pattern Complete**: Entire pattern animates in sequence (wave pulse effect)

**Slot Animations**:
- **Empty**: Subtle dashed border pulse (2s cycle)
- **Next to Fill (Hint)**: Golden glow, pulse faster (1s cycle)
- **Filled Correctly**: Green checkmark appears above (0.3s)
- **Filled Incorrectly**: Orange border glow (not red - non-punitive)

**Celebration Animations**:
- **Pattern Copied**: Confetti burst from pattern center
- **Pattern Extended**: Elements slide in from right, "domino effect"
- **Rule Identified**: Pattern pulses in sequence showing the rule
- **Pattern Created**: Rainbow "spotlight" sweeps across child's creation

**Accessibility Consideration**:
- All animations can be disabled: Settings → "Reduced Motion"
- Alternative feedback: Static visual indicators + sound + text

### Audio Design

#### Background Music Options

1. **Calm**: Soft marimba melody, 70 BPM, C major, ambient
2. **Energetic**: Upbeat xylophone + ukulele, 130 BPM, bouncy
3. **Focused**: Gentle white noise or soft rain (no melody)
4. **Silent**: No background music (parent/therapist can provide own)

**Music Volume**: Default 25%, adjustable 0-100%

#### Sound Effects Library

**Interaction Sounds**:
- Element pickup: Soft "pop" (250Hz, 0.1s)
- Element drag: Quiet whoosh (looping while dragging)
- Snap to slot (correct): Satisfying "click" + bright chime (C6, 0.2s)
- Snap to slot (incorrect): Neutral "boop" (150Hz, 0.2s) - no harsh buzzer
- Pattern complete: Success melody (C-E-G-C ascending arpeggio, 1.5s)
- Level up: Triumphant fanfare (3-second melody)

**Voice-Over Options**:
- **Voice 1**: Female adult, warm, encouraging
- **Voice 2**: Male adult, friendly, patient
- **Voice 3**: Child voice, excited (peer model)
- **Voice 4**: AAC text-to-speech (consistency with child's device)
- **No Voice**: Visual + text only

**Voice-Over Script** (Pattern Builder):
```
INTRO:
"Welcome to Pattern Builder! Let's discover patterns together!"

MODE INTROS:
- Copy Mode: "Copy the pattern you see above!"
- Extend Mode: "What comes next in this pattern?"
- Find Rule Mode: "What's the rule for this pattern?"
- Create Mode: "Design your own repeating pattern!"

DURING PLAY (random rotation):
- "You're doing great!"
- "Nice pattern building!"
- "Keep going!"
- "You found it!"

CORRECT PLACEMENT:
- "Perfect! That's the right one!"
- "Yes! [Color/Shape] comes next!"
- "Great job matching the pattern!"

GENTLE REDIRECT (not failure language):
- "Hmm, let's check that one"
- "Look at the pattern again"
- "What comes next in red-blue-red-blue?"

PATTERN COMPLETE:
- "You did it! You completed the pattern!"
- "Awesome! This pattern goes [describe rule]"
- "Perfect pattern! You're a pattern builder!"

ATTRIBUTE SWITCH (Flexibility):
- "Now let's try SHAPE patterns!"
- "This time, match the COLORS"
- "Let's look at the SIZES now"

MASTERY ACHIEVED (after Level 15):
- "Incredible! You're a Pattern Master!"
- "You can create and extend any pattern! Amazing!"
```

**Language Localization** (Phase 2):
- Spanish, Mandarin voice-overs
- Pattern rule descriptions in 10 languages
- AAC symbols (culture-neutral)

### User Interface Layout

#### Screen Layout (16:9 aspect ratio, responsive)

```
┌─────────────────────────────────────────────────────────┐
│ [⚙Settings] [Pause⏸] [Progress] [Mode: Copy] [?Help]   │  ← Top Bar
├─────────────────────────────────────────────────────────┤
│                                                           │
│              INSTRUCTION AREA                            │  ← Clear, large font
│         "Copy the pattern below!" [🔊]                   │
│                                                           │
├─────────────────────────────────────────────────────────┤
│                                                           │
│            MODEL PATTERN (Reference)                     │
│     🔴 🔵 🔴 🔵 🔴 🔵                                      │  ← Pattern to copy/extend
│     [This is what you match to]                          │
│                                                           │
├─────────────────────────────────────────────────────────┤
│                                                           │
│            YOUR PATTERN (Work Area)                      │
│     [_] [_] [_] [_] [_] [_]                              │  ← Empty slots to fill
│     (Drag elements here to build pattern)               │
│                                                           │
├─────────────────────────────────────────────────────────┤
│                                                           │
│            ELEMENT PALETTE                               │
│     🔴  🔵  🟢  🟡  ⭐  ⬜  🔺                             │  ← Draggable elements
│     (Drag elements from here)                           │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

**Responsive Adaptations**:
- **Phone Portrait**: Vertical layout, palette at bottom (thumb-reachable)
- **Tablet Landscape**: Wider spacing, larger elements (120px vs 70px)
- **Desktop**: Mouse-optimized, keyboard shortcuts enabled (arrow keys)

#### Button Specifications

**Touch Target Sizes** (WCAG 2.1 AA):
- Minimum: 44×44px (iOS) / 48×48dp (Android)
- Pattern elements: 70×70px default (well above minimum)
- Buttons: 60×60px for primary actions

**Button States**:
- Default: Solid color, icon + text label
- Hover: Scale 105%, glow effect
- Press: Scale 95%, darker shade
- Disabled: 40% opacity, cursor not-allowed
- Keyboard Focus: 3px yellow outline (high visibility)

### Accessibility Features (WCAG 2.1 AA + Autism-Specific)

#### Visual Accessibility

**Color Contrast**:
- Text on background: 7:1 ratio (AAA standard, exceeds requirement)
- UI elements: 4.5:1 ratio (AA standard)
- Pattern elements: Distinct even in grayscale mode

**Colorblind Accommodations**:
- **Deuteranopia (Red-Green)**: Patterns overlay with stripes/dots
  - Red: Vertical stripes
  - Green: Horizontal stripes
  - Additional: Shape-only mode available
- **Protanopia**: Similar pattern overlays
- **Tritanopia (Blue-Yellow)**: High-contrast alternate colors provided
- **Total Colorblindness**: Grayscale mode + patterns + shape-only patterns

**Low Vision Support**:
- Pinch-to-zoom: 300% magnification without breaking layout
- High contrast mode: Black background, white slots, neon elements
- Large element mode: 150% scale for all pattern pieces
- Screen reader compatible: All elements labeled with ARIA

#### Motor Accessibility

**Touch/Click Accommodations**:
- Large touch targets (70px minimum, 110px available)
- Touch-and-hold duration: Adjustable 0.5-3.0 seconds
- Drag sensitivity: Low/Medium/High settings
- Magnetic slots: Elements snap within 40px radius (forgiving placement)

**Alternative Input Methods**:
- **Keyboard Navigation**:
  - Tab: Cycle through palette elements
  - Arrow keys: Highlight slots (left-right sequence)
  - Enter: Place selected element in highlighted slot
  - Backspace: Remove element from slot
  - Spacebar: Submit pattern for validation
- **Switch Access**: Single-switch scanning (2.5s dwell time per element)
- **Eye Gaze**: Dwell selection (2.0s on element, 1.5s on slot)
- **Voice Control**:
  - "Select red circle"
  - "Place in slot three"
  - "Remove from slot two"
  - "Submit pattern"

#### Cognitive Accessibility

**Executive Function Support**:
- **Visual Checklist**: Shows slots filled (✓) vs. empty (○)
- **Undo Button**: Remove last placed element (no penalty)
- **Reset Button**: Clear work area, start pattern over
- **Pause Anytime**: Game freezes, model stays visible
- **No Time Pressure**: Untimed by default (optional timer for advanced users)

**Pattern Analysis Aids** (Optional, for struggling learners):
- **Rule Hint Button**: "This pattern goes red-blue-red-blue"
- **Color Sorter**: Elements in palette grouped by color/shape
- **Next Element Preview**: Show silhouette of correct next element (disabled in independent mode)

**Autism-Specific Accommodations**:
- **Predictable Structure**: Same layout every session
- **Visual Schedule**: Progress bar shows current level / total levels
- **Warning Before Transitions**: "2 more patterns to finish this level!"
- **Escape to Calm Space**: Button to calming breathing exercise
- **No Sudden Surprises**: All dimension switches announced in advance
- **Explicit Rule Statements**: After completing pattern, game states the rule ("This was an AB pattern")

#### Auditory Accessibility

**Deaf/Hard of Hearing**:
- All audio has visual equivalent:
  - Voice-overs → Text appears in instruction area + icon
  - Sound effects → Visual effects (sparkles, checkmarks, glows)
  - Correct/incorrect feedback → Color-coded (green/orange glow)
- Captions: 100% of speech captioned
- Visual pattern pulse: Shows sequence of pattern rule

#### Screen Reader Support (WCAG A Standard)

**Semantic HTML + ARIA Labels**:
```html
<div role="application" aria-label="Pattern Builder Game">
  <header>
    <button aria-label="Settings" aria-description="Adjust game preferences">⚙</button>
    <div aria-live="polite" aria-label="Current mode">Copy Mode</div>
  </header>

  <section aria-labelledby="model-pattern-label">
    <h2 id="model-pattern-label">Model Pattern</h2>
    <div role="list" aria-label="Pattern to copy: red circle, blue square, red circle, blue square">
      <div role="listitem" aria-label="Element 1: red circle"></div>
      <div role="listitem" aria-label="Element 2: blue square"></div>
      <div role="listitem" aria-label="Element 3: red circle"></div>
      <div role="listitem" aria-label="Element 4: blue square"></div>
    </div>
  </section>

  <section aria-labelledby="work-area-label">
    <h2 id="work-area-label">Your Pattern</h2>
    <div role="list" aria-label="Pattern slots: 2 of 6 filled">
      <div role="listitem" aria-label="Slot 1: red circle" aria-description="Correct"></div>
      <div role="listitem" aria-label="Slot 2: blue square" aria-description="Correct"></div>
      <div role="listitem" aria-label="Slot 3: empty" aria-description="Drag element here"></div>
      <!-- ... -->
    </div>
  </section>

  <section aria-labelledby="palette-label">
    <h2 id="palette-label">Element Palette</h2>
    <div role="list" aria-label="Available elements">
      <button role="listitem" aria-label="Red circle" draggable="true"
              aria-description="Drag to pattern slot">🔴</button>
      <button role="listitem" aria-label="Blue square" draggable="true">🔵</button>
      <!-- ... -->
    </div>
  </section>

  <div aria-live="assertive" aria-atomic="true">
    <!-- Real-time feedback announced immediately -->
    Correct! Red circle placed in slot 1. 5 slots remaining.
  </div>
</div>
```

**Screen Reader Announcements**:
- Game start: "Pattern Builder. Copy Mode. Copy the pattern with 4 elements. Red, blue, red, blue."
- Element selected: "Red circle selected. Drag to pattern slot."
- Element placed correctly: "Correct! Red circle placed in slot 1. Pattern so far: red circle. 3 slots remaining."
- Element placed incorrectly: "Not quite. Try again. Pattern should go red, blue, red, blue."
- Pattern complete: "Pattern completed! You copied the pattern perfectly. This is an AB pattern. It goes red, blue, red, blue, repeating."

---

## 7. CONTENT SPECIFICATIONS

### Game Assets Required

#### Pattern Elements (165 total unique combinations)

**Color Variations** (8 colors):
- Red, Blue, Yellow, Green, Orange, Purple, Pink, Brown

**Shape Variations** (8 shapes):
- Circle, Square, Triangle, Star, Rectangle, Hexagon, Diamond, Heart

**Size Variations** (3 sizes):
- Small (40px), Medium (70px), Large (110px)

**Total Combinations**:
- Single attribute: 8 colors × 8 shapes × 3 sizes = 192 possible elements
- Game uses subset: 165 most distinct combinations
- Asset generation: Programmatic (SVG generation) - no need for 165 individual files

**Asset Specifications**:
- Format: SVG vector (scalable, small file size)
- Colors: Solid fill (defined by hex codes in code)
- Strokes: 2px white outline (defined programmatically)
- Size: Rendered at runtime (40px, 70px, or 110px)
- Style: Flat design, modern, clean edges

**Sample Asset List** (Programmatically Generated):
```javascript
// Element generation pseudocode
const colors = ['#E74C3C', '#3498DB', '#F1C40F', '#2ECC71', '#E67E22', '#9B59B6', '#FFC0CB', '#8B4513'];
const shapes = ['circle', 'square', 'triangle', 'star', 'rectangle', 'hexagon', 'diamond', 'heart'];
const sizes = [40, 70, 110];

function generateElement(color, shape, size) {
  return `<svg width="${size}" height="${size}">
    <${shape} fill="${color}" stroke="#FFFFFF" stroke-width="2"/>
  </svg>`;
}

// Generate all 165 needed combinations dynamically
```

#### UI Elements (25 assets)

**Buttons** (Vector SVG):
- Settings gear icon
- Pause button
- Help (question mark icon)
- Play/Continue (play icon)
- Reset (circular arrow)
- Undo (left arrow)
- Submit pattern (checkmark)
- Mode selectors (Copy, Extend, Find Rule, Create icons)

**Work Area Components**:
- Empty slot graphic (dashed border rectangle)
- Filled slot graphic (solid border)
- Correct indicator (green checkmark)
- Error indicator (orange glow overlay)
- Hint arrow (pointing from palette to slot)

**Progress Indicators**:
- Progress bar segments (15 levels)
- Star rating (empty, half, full states)
- Level number badges (1-15)

**Feedback Graphics**:
- Confetti particles (50 individual pieces)
- Sparkle particles (star shapes)
- Checkmark icon (animated draw-in)
- Glow effect overlays (green success, orange error)

#### Background Environments (4 themes)

**Theme 1: Classroom** (Default)
- Soft wood desk texture (subtle)
- Bookshelf in blurred background
- Window showing sky (natural light feel)
- Warm, educational, focused

**Theme 2: Nature Workshop** (Outdoors)
- Grass texture at bottom
- Trees and sky background (soft focus)
- Picnic table setting
- Calming, outdoor learning

**Theme 3: Space Station** (Futuristic)
- Starfield background (very dark, not distracting)
- Sleek metal table surface
- Glowing UI elements (sci-fi aesthetic)
- Exciting, modern

**Theme 4: Minimal** (Focused Profile)
- Pure white background (no texture)
- Gray work area only
- Zero decorations
- Maximum focus on patterns

**Specifications**:
- Resolution: 1920×1080px (scales to device)
- Format: PNG or JPG (static backgrounds)
- File size: <500KB each (optimized)
- Layering: Single layer (not parallax, to avoid distraction from patterns)

#### Character Mascot (Optional Guide)

**"Patty the Pattern Parrot"** (Visual Guide):
- Colorful parrot character (reflects pattern diversity)
- Expressive face (happy, thinking, excited)
- Animated reactions:
  - Idle: Perches on side, gentle breathing
  - Encouragement: Flaps wings, chirps
  - Celebration: Flies in circle, confetti falls
  - Thinking: Tilts head (during pattern analysis)

**Specs**:
- Spine 2D skeletal animation (smooth, efficient)
- 6 animation states @ 24fps
- Optional: Can be turned off for Focused profile

---

### Audio Asset Library

#### Music Tracks (3 modes)

**Track 1: "Pattern Pathways"** (Calm Profile)
- Instruments: Marimba + soft strings
- Tempo: 70 BPM
- Key: C Major
- Duration: 3:30 (seamless loop)
- Mood: Thoughtful, focused, gentle
- File: WAV 44.1kHz stereo → OGG for WebGL

**Track 2: "Sequence Symphony"** (Energetic Profile)
- Instruments: Xylophone + ukulele + light drums
- Tempo: 130 BPM
- Key: G Major
- Duration: 2:45 (loop)
- Mood: Upbeat, playful, engaging
- File: Same specs as Track 1

**Track 3: "Focus Flow"** (Ambient)
- Sound: White noise + soft chimes (occasional)
- No beat structure
- Duration: 10:00 (long loop)
- Mood: Neutral, non-distracting

#### Sound Effects (42 total)

**Interaction SFX**:
| Event | Sound | Frequency | Duration | Volume |
|-------|-------|-----------|----------|--------|
| Element pickup | Soft pop | 250Hz | 0.1s | 60% |
| Drag (loop) | Quiet whoosh | Broadband | Looping | 25% |
| Snap correct | Click + chime | 300Hz + C6 | 0.3s | 75% |
| Snap incorrect | Gentle boop | 150Hz | 0.2s | 50% |
| Pattern complete | Arpeggio (C-E-G-C) | 523-1046Hz | 1.5s | 85% |
| Level complete | Fanfare melody | Multi | 3.0s | 90% |
| Dimension switch | Ascending chime sequence | 400-800Hz | 1.0s | 70% |

**Voice-Over Recordings** (3 voice actors × 40 lines = 120 files):
- Child voice actor (age 7-9)
- Female adult voice (warm, encouraging)
- Male adult voice (friendly, clear)

**Recording Specs**:
- Format: WAV 48kHz 16-bit mono
- Processing: Light compression, normalize -3dB
- Noise floor: <-60dB
- Export: OGG Vorbis for WebGL, AAC for mobile

---

## 8. DATA TRACKING & ANALYTICS

### Session Data Schema (Backend API)

```json
{
  "session_id": "a1b2c3d4-e5f6-7890-abcd-1234567890ab",
  "game_id": "pattern_builder_v1",
  "user_id": "user_67890",
  "child_profile_id": "child_12345",
  "timestamp_start": "2025-10-20T10:15:00Z",
  "timestamp_end": "2025-10-20T10:28:45Z",
  "duration_seconds": 825,
  "completed": true,

  "game_configuration": {
    "difficulty_level": 5,
    "mode": "copy",
    "pattern_type": "ABC",
    "pattern_length": 6,
    "num_attributes": 1,
    "attribute_type": "shape",
    "num_distractors": 2,
    "sensory_profile": "energetic",
    "voice_enabled": true,
    "prompts_enabled": true
  },

  "performance_metrics": {
    "patterns_attempted": 8,
    "patterns_completed_correctly": 6,
    "pattern_accuracy_percentage": 75.0,
    "elements_placed_total": 48,
    "elements_correct_first_attempt": 38,
    "element_accuracy_percentage": 79.2,
    "
    "mastery_achieved": false,

    "prompt_data": {
      "independent_attempts": 35,
      "level_1_prompts": 4,
      "level_2_prompts": 5,
      "level_3_prompts": 3,
      "level_4_prompts": 1,
      "level_5_prompts": 0,
      "prompt_dependency_score": 27.1
    },

    "timing_data": {
      "avg_time_per_pattern_seconds": 103.1,
      "avg_time_per_element_seconds": 17.2,
      "fastest_pattern_seconds": 62,
      "slowest_pattern_seconds": 187,
      "pattern_times": [98, 120, 187, 78, 115, 62, 105, 110]
    },

    "cognitive_flexibility_metrics": {
      "dimension_switches_presented": 1,
      "successful_switches": 1,
      "perseveration_errors": 0,
      "switch_success_rate": 100.0,
      "avg_time_to_adapt_seconds": 15
    }
  },

  "skills_practiced": [
    {
      "skill_id": "ablls_g21_abc_patterns",
      "skill_name": "ABC Pattern Recognition",
      "framework": "ABLLS-R",
      "category": "G21",
      "patterns_this_session": 8,
      "correct_this_session": 6,
      "accuracy_this_session": 75.0,
      "cumulative_patterns": 34,
      "cumulative_correct": 28,
      "cumulative_accuracy": 82.4,
      "mastery_status": "in_progress",
      "sessions_until_mastery": 2
    },
    {
      "skill_id": "ablls_h15_sequencing",
      "skill_name": "Sequencing & Order",
      "framework": "ABLLS-R",
      "category": "H15",
      "trials_this_session": 8,
      "correct_this_session": 6,
      "accuracy_this_session": 75.0,
      "cumulative_trials": 42,
      "cumulative_correct": 35,
      "cumulative_accuracy": 83.3,
      "mastery_status": "in_progress",
      "sessions_until_mastery": 1
    },
    {
      "skill_id": "vb_mapp_flexibility_listener14",
      "skill_name": "Cognitive Flexibility (Dimension Switching)",
      "framework": "VB-MAPP",
      "category": "Listener 14",
      "switches_this_session": 1,
      "successful_this_session": 1,
      "accuracy_this_session": 100.0,
      "cumulative_switches": 8,
      "cumulative_successful": 7,
      "cumulative_accuracy": 87.5,
      "mastery_status": "emerging",
      "sessions_until_mastery": 4
    }
  ],

  "error_analysis": {
    "error_types": [
      {
        "type": "wrong_element",
        "count": 7,
        "percentage": 58.3,
        "common_pattern": "Selected correct shape, wrong color (attribute confusion)"
      },
      {
        "type": "wrong_position",
        "count": 3,
        "percentage": 25.0,
        "common_pattern": "Off-by-one sequencing error"
      },
      {
        "type": "perseveration",
        "count": 0,
        "percentage": 0,
        "common_pattern": "None detected"
      },
      {
        "type": "random_placement",
        "count": 2,
        "percentage": 16.7,
        "common_pattern": "No discernible pattern rule understood"
      }
    ],
    "error_correction": {
      "self_corrected": 4,
      "corrected_with_prompt": 6,
      "not_corrected": 2
    }
  },

  "behavioral_observations": {
    "engagement_score": 8.0,
    "frustration_indicators": 1,
    "help_requests": 3,
    "spontaneous_comments": 2,
    "breaks_requested": 0,
    "session_abandoned": false,
    "attention_lapses": 2
  },

  "rewards_earned": {
    "points": 95,
    "stars": 2,
    "badges": ["pattern_copier_bronze"],
    "unlocks": ["Level 6 unlocked"]
  },

  "next_session_recommendation": {
    "difficulty_change": "maintain",
    "reasoning": "75% accuracy - within optimal challenge zone (70-85%). Continue Level 5 with new pattern content before advancing.",
    "focus_skills": ["attribute_discrimination", "ABC_pattern_extension"],
    "suggested_mode": "extend",
    "estimated_sessions_to_mastery": 2
  }
}
```

### Parent Dashboard Visualizations

#### 1. Pattern Skill Progress Chart
```
Pattern Recognition Mastery (ABLLS-R G20-G25)

100% ┤
 90% ┤                                            ●─────● G25 (Create)
 80% ┤                                      ●─────●
 70% ┤                                ●─────●           G22 (Complex)
 60% ┤                          ●─────●
 50% ┤                    ●─────●                       G21 (ABC)
 40% ┤              ●─────●
 30% ┤        ●─────●                                   G20 (AB)
     └────┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───→
         Day 1  Day 3  Day 5  Day 7  Day 9  Day 11  Day 13

Key Insight: "Emma advanced from AB to ABC patterns in 9 days! Ready for complex patterns next."
```

#### 2. Cognitive Flexibility Tracker
```
Dimension Switching Success Rate

Color → Shape: ████████░░ 80% (8/10 successful)
Shape → Size:  ██████████ 100% (5/5 successful)
Size → Color:  ███████░░░ 70% (7/10 successful)

Perseveration Score: 2/23 attempts (8.7%) - Excellent!

Insight: "Emma switches between pattern types with minimal perseveration. Strong cognitive flexibility!"
```

#### 3. Pattern Type Mastery Grid
```
┌──────────┬──────────┬──────────┬──────────┐
│ AB       │ ABC      │ AABB     │ Multi-   │
│ ✓✓✓      │ ✓✓       │ ✓        │          │
│ Mastered │ In Prog  │ Emerging │ Not Yet  │
├──────────┼──────────┼──────────┼──────────┤
│ 95%      │ 82%      │ 65%      │ --       │
│ 15 sess  │ 10 sess  │ 4 sess   │ 0 sess   │
└──────────┴──────────┴──────────┴──────────┘
```

#### 4. Session Summary Table
| Date | Level | Mode | Pattern Type | Accuracy | Time | Stars | Flexibility |
|------|-------|------|--------------|----------|------|-------|-------------|
| Oct 20 | 5 | Copy | ABC (Shape) | 75% | 13m 45s | ⭐⭐ | 1/1 switches |
| Oct 19 | 4 | Copy | ABC (Color) | 88% | 10m 20s | ⭐⭐⭐ | N/A |
| Oct 18 | 4 | Extend | ABC (Color) | 70% | 14m 10s | ⭐⭐ | N/A |

#### 5. Strengths & Challenges (AI-Generated Insights)

**Strengths**:
- "Emma excels at AB and ABC patterns (85%+ accuracy)"
- "Strong cognitive flexibility - switches between attributes easily"
- "Self-corrects errors 50% of the time (high metacognitive awareness)"
- "Sustained engagement for 13+ minutes (excellent attention)"

**Areas to Support**:
- "Occasional attribute confusion (selects right shape, wrong color) - practice multi-attribute awareness"
- "Off-by-one sequencing errors - work on positional language (first, second, third)"

**Parent Action Items**:
- "Practice patterns in daily life: clothing (stripe-dot-stripe), music (clap-stomp-clap), routines"
- "Use positional language: 'What comes first? What comes next? What comes last?'"

### Clinical Dashboard (for BCBAs/Therapists)

#### Acquisition Curve Analysis
```python
# Learning curve for ABC patterns (ABLLS-R G21)

Expected Patterns to Mastery: 40-60 patterns (norm for neurotypical 5-6yo)
Emma's Patterns to Mastery: 34 patterns (projected) ✓ Within/above norm
Learning Rate: 3.2% improvement per session (average)
Trend: Accelerating (recent 5 sessions: 5.1% improvement)
```

#### Cognitive Flexibility Metrics
```
Dimension Switching Performance

Session 1-5: 60% success rate (4/10 switches) - Expected baseline
Session 6-10: 85% success rate (17/20 switches) - Rapid improvement
Session 11+: 95% success rate (19/20 switches) - Near mastery

Perseveration Tracking:
Week 1: 25% of errors due to perseveration (high)
Week 2: 12% of errors due to perseveration (improving)
Week 3: 6% of errors due to perseveration (low, excellent)

Interpretation: Strong executive function development. Child can inhibit previous responses and apply new rules.
```

#### Error Pattern Analysis
```
Most Common Errors (Last 10 Sessions):

1. Attribute Confusion (35% of errors)
   - Selects correct shape, wrong color OR correct color, wrong shape
   - Indicates: Attending to single dimension despite multi-attribute instruction
   - Intervention: Explicit pre-teaching: "This time, BOTH color AND shape must match"

2. Off-by-One Sequencing (22% of errors)
   - Places correct element in wrong position (e.g., 3rd element in 2nd slot)
   - Indicates: Weak positional awareness / left-right tracking
   - Intervention: Number slots explicitly (1, 2, 3, 4...), practice ordinal language

3. Pattern Rule Misidentification (18% of errors)
   - Child applies wrong pattern rule (e.g., sees ABC as AB)
   - Indicates: Insufficient analysis time OR working memory load
   - Intervention: Pause before building: "What's the pattern rule? Say it first."

4. Random Placement (15% of errors)
   - No discernible pattern rule applied
   - Indicates: Disengagement OR task too difficult
   - Intervention: Drop difficulty level, re-engage with errorless mode

5. Distractor Selection (10% of errors)
   - Selects element not in model pattern
   - Indicates: Insufficient visual scanning / impulsivity
   - Intervention: Teach systematic left-to-right scanning strategy
```

### Data Privacy & HIPAA Compliance

**Encryption**:
- All session data encrypted at rest (AES-256)
- TLS 1.3 in transit
- Database: PostgreSQL with pgcrypto extension
- Encryption keys rotated every 90 days

**Access Controls**:
- Parents: See only their child's data (role-based access control)
- Therapists: See only assigned clients with explicit parent consent
- Researchers: De-identified, aggregate data only (opt-in consent required)
- Audit logs: All data access logged with timestamp + user ID

**Data Retention**:
- Active users: Indefinite storage (for longitudinal progress tracking)
- Inactive users (>1 year): Data anonymized, personal identifiers removed
- Deleted accounts: 30-day soft delete (recovery period), then permanent erasure

**Compliance Checklist**:
- ✅ HIPAA Business Associate Agreement (BAA) with cloud provider
- ✅ COPPA compliant (parental consent for children <13, verified)
- ✅ GDPR compliant (right to access, delete, export data, within 30 days)
- ✅ FERPA compliant (educational records protection, if used in schools)

---

## 9. TECHNICAL IMPLEMENTATION

### Unity Development Specifications

#### Project Setup
- **Unity Version**: 2022.3 LTS (Long-Term Support for stability)
- **Render Pipeline**: Universal Render Pipeline (URP) 14.x
- **Platform Target**: WebGL (primary), iOS, Android (secondary)
- **Scripting Backend**: IL2CPP (better performance, smaller builds)
- **API Compatibility**: .NET Standard 2.1
- **C# Version**: 9.0

#### Project Structure
```
Assets/
├── Scenes/
│   ├── MainMenu.unity
│   ├── PatternBuilderGame.unity
│   ├── ModeSelection.unity
│   └── CelebrationScene.unity
├── Scripts/
│   ├── GameManagers/
│   │   ├── PatternBuilderManager.cs (main game logic)
│   │   ├── PatternGenerator.cs (pattern creation algorithms)
│   │   ├── DifficultyController.cs (adaptive difficulty)
│   │   ├── FlexibilityTracker.cs (dimension switching)
│   │   ├── ProgressTracker.cs (session data)
│   │   └── AudioManager.cs (sound control)
│   ├── UI/
│   │   ├── DraggableElement.cs (pattern element behavior)
│   │   ├── PatternSlot.cs (drop zone behavior)
│   │   ├── PaletteController.cs (element source)
│   │   ├── ModelPatternDisplay.cs (reference pattern)
│   │   ├── FeedbackAnimator.cs (correct/incorrect)
│   │   └── AccessibilityManager.cs (a11y features)
│   ├── Networking/
│   │   ├── APIClient.cs (backend communication)
│   │   ├── SessionUploader.cs (data sync)
│   │   └── AuthManager.cs (user authentication)
│   ├── Patterns/
│   │   ├── PatternData.cs (pattern definition)
│   │   ├── PatternValidator.cs (check correctness)
│   │   ├── PatternRule.cs (AB, ABC, AABB definitions)
│   │   └── ElementData.cs (color, shape, size data)
│   └── Utilities/
│       ├── ElementFactory.cs (generate SVG elements)
│       ├── SensoryProfiler.cs (profile switching)
│       └── AnalyticsLogger.cs (event tracking)
├── Prefabs/
│   ├── Elements/ (draggable pattern pieces)
│   ├── Slots/ (drop zones)
│   ├── UI/ (buttons, panels)
│   └── Effects/ (particles, animations)
├── Materials/
├── Audio/
│   ├── Music/
│   ├── SFX/
│   └── VoiceOvers/
├── Animations/
│   └── PattyParrot/ (character animations)
└── Plugins/
    ├── TextMeshPro/
    ├── DOTween/ (animation library)
    └── UniTask/ (async utilities)
```

#### Core Script: PatternBuilderManager.cs

```csharp
using UnityEngine;
using System.Collections.Generic;
using System.Linq;
using UnityEngine.EventSystems;
using Cysharp.Threading.Tasks;

public class PatternBuilderManager : MonoBehaviour
{
    [Header("Game Configuration")]
    [SerializeField] private int currentLevel = 1;
    [SerializeField] private GameMode currentMode = GameMode.Copy;
    [SerializeField] private PatternType currentPatternType = PatternType.AB;

    [Header("UI References")]
    [SerializeField] private Transform modelPatternArea;
    [SerializeField] private Transform workArea;
    [SerializeField] private Transform paletteArea;
    [SerializeField] private GameObject elementPrefab;
    [SerializeField] private GameObject slotPrefab;

    [Header("Difficulty Settings")]
    [SerializeField] private DifficultyConfig difficultyConfig;

    [Header("Audio")]
    [SerializeField] private AudioClip correctSound;
    [SerializeField] private AudioClip incorrectSound;
    [SerializeField] private AudioClip patternCompleteSound;

    // Runtime tracking
    private PatternData currentPattern;
    private List<PatternSlot> workSlots = new List<PatternSlot>();
    private List<DraggableElement> paletteElements = new List<DraggableElement>();
    private SessionData currentSession;
    private int patternsCompleted = 0;
    private int elementsCorrect = 0;
    private int elementsIncorrect = 0;
    private FlexibilityTracker flexibilityTracker;

    // Prompting system
    private PromptLevel currentPromptLevel = PromptLevel.None;
    private int consecutiveErrors = 0;

    private void Start()
    {
        flexibilityTracker = GetComponent<FlexibilityTracker>();
        InitializeSession();
        SetupLevel();
    }

    private void InitializeSession()
    {
        currentSession = new SessionData
        {
            sessionId = System.Guid.NewGuid().ToString(),
            gameId = "pattern_builder_v1",
            userId = UserManager.Instance.CurrentUser.Id,
            timestampStart = System.DateTime.UtcNow,
            difficultyLevel = currentLevel,
            mode = currentMode.ToString(),
            configuration = GetCurrentConfiguration()
        };
    }

    private void SetupLevel()
    {
        ClearPreviousPattern();

        // Get difficulty parameters for current level
        var config = difficultyConfig.GetLevelConfig(currentLevel);

        // Generate pattern based on current pattern type and difficulty
        currentPattern = PatternGenerator.Instance.GeneratePattern(
            patternType: currentPatternType,
            length: config.patternLength,
            attributeType: config.attributeType,
            numDistractors: config.numDistractors
        );

        // Display model pattern (reference for child)
        DisplayModelPattern(currentPattern);

        // Create work area slots
        CreateWorkSlots(currentPattern.Length);

        // Populate palette with available elements
        PopulatePalette(currentPattern, config.numDistractors);

        // Announce level start (accessibility)
        AccessibilityManager.Instance.Announce(
            $"Level {currentLevel}, {currentMode} Mode. " +
            $"Pattern has {currentPattern.Length} elements. " +
            GetPatternDescription(currentPattern)
        );
    }

    private void DisplayModelPattern(PatternData pattern)
    {
        foreach (var element in pattern.Elements)
        {
            var elementObj = Instantiate(elementPrefab, modelPatternArea);
            var draggable = elementObj.GetComponent<DraggableElement>();
            draggable.Initialize(element, isDraggable: false); // Model is not draggable
            draggable.SetVisualState(ElementVisualState.Model);
        }
    }

    private void CreateWorkSlots(int count)
    {
        for (int i = 0; i < count; i++)
        {
            var slotObj = Instantiate(slotPrefab, workArea);
            var slot = slotObj.GetComponent<PatternSlot>();
            slot.Initialize(i, OnElementPlaced);
            workSlots.Add(slot);
        }
    }

    private void PopulatePalette(PatternData pattern, int numDistractors)
    {
        // Add all elements from pattern
        var paletteElementsData = new List<ElementData>(pattern.Elements);

        // Add distractor elements (not in pattern)
        var distractors = PatternGenerator.Instance.GenerateDistractors(
            pattern,
            numDistractors
        );
        paletteElementsData.AddRange(distractors);

        // Shuffle palette for unpredictability
        paletteElementsData = paletteElementsData.OrderBy(x => Random.value).ToList();

        // Create draggable elements in palette
        foreach (var elementData in paletteElementsData)
        {
            var elementObj = Instantiate(elementPrefab, paletteArea);
            var draggable = elementObj.GetComponent<DraggableElement>();
            draggable.Initialize(elementData, isDraggable: true);
            paletteElements.Add(draggable);
        }
    }

    private void OnElementPlaced(DraggableElement element, PatternSlot slot)
    {
        bool isCorrect = PatternValidator.IsCorrectPlacement(
            element.ElementData,
            slot.SlotIndex,
            currentPattern
        );

        // Record attempt
        currentSession.RecordElementPlacement(element, slot, isCorrect, currentPromptLevel);

        if (isCorrect)
        {
            HandleCorrectPlacement(element, slot);
        }
        else
        {
            HandleIncorrectPlacement(element, slot);
        }

        // Check for pattern completion
        if (IsPatternComplete())
        {
            OnPatternComplete();
        }
    }

    private void HandleCorrectPlacement(DraggableElement element, PatternSlot slot)
    {
        elementsCorrect++;
        consecutiveErrors = 0;

        // Visual feedback
        slot.PlayCorrectAnimation();
        element.PlayCorrectAnimation();

        // Audio feedback
        AudioManager.Instance.PlaySound(correctSound);

        // Voice encouragement
        VoiceOverManager.Instance.PlayRandomEncouragement();

        // Accessibility announcement
        string elementDesc = GetElementDescription(element.ElementData);
        AccessibilityManager.Instance.Announce(
            $"Correct! {elementDesc} placed in slot {slot.SlotIndex + 1}. " +
            $"{GetRemainingSlots()} slots remaining."
        );

        // Lock element in slot (no more dragging)
        element.SetInteractable(false);

        // Reduce prompt level if doing well
        if (elementsCorrect % 3 == 0 && currentPromptLevel > PromptLevel.None)
        {
            currentPromptLevel--;
        }
    }

    private void HandleIncorrectPlacement(DraggableElement element, PatternSlot slot)
    {
        elementsIncorrect++;
        consecutiveErrors++;

        // Gentle feedback
        slot.PlayIncorrectAnimation(); // Subtle glow, not harsh
        element.ReturnToPalette();

        // Non-punitive audio
        AudioManager.Instance.PlaySound(incorrectSound, volume: 0.4f);

        // Provide help if struggling
        if (consecutiveErrors >= 2)
        {
            currentPromptLevel = PromptLevel.AttributeHighlight;
            HighlightRelevantAttribute();
        }

        if (consecutiveErrors >= 3)
        {
            currentPromptLevel = PromptLevel.NextElementHint;
            ShowNextElementHint(slot);
        }

        if (consecutiveErrors >= 4)
        {
            currentPromptLevel = PromptLevel.CorrectElementReveal;
            RevealCorrectElement(slot);
        }

        // Accessibility
        string correctDesc = GetElementDescription(currentPattern.Elements[slot.SlotIndex]);
        AccessibilityManager.Instance.Announce(
            $"Not quite. The correct element is {correctDesc}. Try again."
        );
    }

    private void HighlightRelevantAttribute()
    {
        // Highlight relevant attribute in model pattern
        // E.g., if color pattern, emphasize colors; if shape, emphasize shapes
        foreach (var modelElement in modelPatternArea.GetComponentsInChildren<DraggableElement>())
        {
            modelElement.HighlightAttribute(currentPattern.AttributeType);
        }

        VoiceOverManager.Instance.PlayLine($"Look at the {currentPattern.AttributeType}s");
    }

    private void ShowNextElementHint(PatternSlot slot)
    {
        // Show silhouette or narrow options for next element
        ElementData correctElement = currentPattern.Elements[slot.SlotIndex];

        // Highlight slot
        slot.Highlight();

        // Highlight correct element in palette (if errorless mode)
        if (SettingsManager.Instance.ErrorlessModeEnabled)
        {
            var correctPaletteElement = paletteElements.Find(
                e => e.ElementData.Equals(correctElement)
            );
            correctPaletteElement?.Highlight();
        }
    }

    private void RevealCorrectElement(PatternSlot slot)
    {
        ElementData correctElement = currentPattern.Elements[slot.SlotIndex];

        // Find and highlight correct element in palette
        var correctPaletteElement = paletteElements.Find(
            e => e.ElementData.Equals(correctElement)
        );

        if (correctPaletteElement != null)
        {
            correctPaletteElement.Highlight();

            // Show arrow from element to slot
            ArrowPrompt.Instance.ShowArrow(
                correctPaletteElement.transform,
                slot.transform
            );

            string elementDesc = GetElementDescription(correctElement);
            VoiceOverManager.Instance.PlayLine($"Try the {elementDesc}. It goes here.");
        }
    }

    private bool IsPatternComplete()
    {
        return workSlots.All(slot => slot.IsFilled);
    }

    private async void OnPatternComplete()
    {
        // Validate entire pattern
        bool isPatternCorrect = PatternValidator.ValidatePattern(
            GetChildPattern(),
            currentPattern
        );

        if (isPatternCorrect)
        {
            patternsCompleted++;

            // Celebration
            await CelebrationController.Instance.ShowPatternCelebration(currentPattern);

            // Explain pattern rule (metacognitive awareness)
            string patternRule = PatternAnalyzer.DescribePatternRule(currentPattern);
            VoiceOverManager.Instance.PlayLine(
                $"Perfect! This is a {patternRule} pattern."
            );
            AccessibilityManager.Instance.Announce(
                $"Pattern completed correctly! {patternRule}"
            );

            // Award points
            int points = CalculatePoints(isPatternCorrect, elementsCorrect, elementsIncorrect);
            RewardSystem.Instance.AwardPoints(points);

            // Check for level progression
            CheckLevelProgression();
        }
        else
        {
            // Partial completion - highlight errors
            HighlightPatternErrors();
            VoiceOverManager.Instance.PlayLine("Almost! Check the highlighted elements.");
        }
    }

    private void CheckLevelProgression()
    {
        float accuracy = (float)patternsCompleted / (patternsCompleted + 1) * 100f;

        // MASTERY - Level Up
        if (accuracy >= 85f && consecutiveErrors <= 1)
        {
            currentLevel++;
            AccessibilityManager.Instance.Announce($"Level up! Moving to Level {currentLevel}!");

            // Check for dimension switch (cognitive flexibility challenge)
            if (currentLevel % 5 == 0)
            {
                SwitchDimension();
            }

            SetupLevel();
        }
        // STRUGGLING - Stay or Drop
        else if (accuracy < 70f)
        {
            currentLevel = Mathf.Max(1, currentLevel - 1);
            AccessibilityManager.Instance.Announce("Let's try this level again with more help!");
            SetupLevel();
        }
        // OPTIMAL - Continue
        else
        {
            SetupLevel(); // New pattern, same level
        }
    }

    private void SwitchDimension()
    {
        // Cognitive flexibility challenge: Switch from color → shape → size → multi-attribute
        var previousAttribute = currentPattern.AttributeType;

        var allAttributes = new[] { AttributeType.Color, AttributeType.Shape, AttributeType.Size };
        var newAttribute = allAttributes.FirstOrDefault(a => a != previousAttribute);

        if (newAttribute != default)
        {
            currentPattern.AttributeType = newAttribute;

            // Track flexibility
            flexibilityTracker.RecordDimensionSwitch(previousAttribute, newAttribute);

            // Announce switch
            VoiceOverManager.Instance.PlayLine($"New challenge! Now let's try {newAttribute} patterns!");
            AccessibilityManager.Instance.Announce($"Dimension switch: {newAttribute} patterns now.");

            // Visual cue: Flash new attribute type icon
            UIManager.Instance.ShowDimensionSwitchNotification(newAttribute);
        }
    }

    // Helper methods

    private string GetPatternDescription(PatternData pattern)
    {
        string desc = "";
        foreach (var element in pattern.Elements)
        {
            desc += GetElementDescription(element) + ", ";
        }
        return desc.TrimEnd(',', ' ');
    }

    private string GetElementDescription(ElementData element)
    {
        // Return human-readable description for accessibility
        return $"{element.Color} {element.Shape} {element.Size}";
    }

    private List<ElementData> GetChildPattern()
    {
        return workSlots.Select(slot => slot.GetFilledElement()?.ElementData).ToList();
    }

    private int GetRemainingSlots()
    {
        return workSlots.Count(slot => !slot.IsFilled);
    }

    private int CalculatePoints(bool patternCorrect, int correct, int incorrect)
    {
        int basePoints = correct * 10;
        int bonus = patternCorrect ? 20 : 0;
        int penalty = incorrect * 2;
        return Mathf.Max(0, basePoints + bonus - penalty);
    }

    private void HighlightPatternErrors()
    {
        for (int i = 0; i < workSlots.Count; i++)
        {
            if (!PatternValidator.IsCorrectPlacement(
                workSlots[i].GetFilledElement()?.ElementData,
                i,
                currentPattern))
            {
                workSlots[i].HighlightError();
            }
        }
    }

    private void ClearPreviousPattern()
    {
        // Clear model pattern
        foreach (Transform child in modelPatternArea)
        {
            Destroy(child.gameObject);
        }

        // Clear work slots
        foreach (var slot in workSlots)
        {
            Destroy(slot.gameObject);
        }
        workSlots.Clear();

        // Clear palette
        foreach (var element in paletteElements)
        {
            Destroy(element.gameObject);
        }
        paletteElements.Clear();

        // Reset counters
        elementsCorrect = 0;
        elementsIncorrect = 0;
        consecutiveErrors = 0;
    }

    private GameConfiguration GetCurrentConfiguration()
    {
        return new GameConfiguration
        {
            difficultyLevel = currentLevel,
            mode = currentMode.ToString(),
            patternType = currentPatternType.ToString(),
            patternLength = currentPattern?.Length ?? 0,
            attributeType = currentPattern?.AttributeType.ToString() ?? "",
            sensoryProfile = SensoryProfiler.Instance.CurrentProfile,
            voiceEnabled = SettingsManager.Instance.VoiceEnabled,
            promptsEnabled = SettingsManager.Instance.PromptsEnabled
        };
    }
}

// Supporting classes

[System.Serializable]
public class PatternData
{
    public List<ElementData> Elements;
    public PatternType Type; // AB, ABC, AABB, etc.
    public AttributeType AttributeType; // Color, Shape, Size, Multi
    public int Length => Elements.Count;
}

[System.Serializable]
public class ElementData
{
    public string Color;
    public string Shape;
    public string Size;

    public bool Equals(ElementData other)
    {
        return Color == other.Color && Shape == other.Shape && Size == other.Size;
    }
}

public enum GameMode
{
    Copy,
    Extend,
    FindRule,
    Create
}

public enum PatternType
{
    AB,
    ABC,
    AABB,
    ABB,
    AAB,
    ABCD,
    Growing,
    MultiAttribute
}

public enum AttributeType
{
    Color,
    Shape,
    Size,
    MultiAttribute
}

public enum PromptLevel
{
    None = 0,
    Observational = 1,
    AttributeHighlight = 2,
    NextElementHint = 3,
    CorrectElementReveal = 4,
    FullPhysicalPrompt = 5
}
```

#### Pattern Generation Algorithm

```csharp
public class PatternGenerator : MonoBehaviour
{
    public static PatternGenerator Instance { get; private set; }

    private void Awake()
    {
        Instance = this;
    }

    public PatternData GeneratePattern(
        PatternType patternType,
        int length,
        AttributeType attributeType,
        int numDistractors)
    {
        PatternData pattern = new PatternData
        {
            Type = patternType,
            AttributeType = attributeType,
            Elements = new List<ElementData>()
        };

        switch (patternType)
        {
            case PatternType.AB:
                pattern.Elements = GenerateABPattern(length, attributeType);
                break;
            case PatternType.ABC:
                pattern.Elements = GenerateABCPattern(length, attributeType);
                break;
            case PatternType.AABB:
                pattern.Elements = GenerateAABBPattern(length, attributeType);
                break;
            case PatternType.ABB:
                pattern.Elements = GenerateABBPattern(length, attributeType);
                break;
            case PatternType.AAB:
                pattern.Elements = GenerateAABPattern(length, attributeType);
                break;
            case PatternType.MultiAttribute:
                pattern.Elements = GenerateMultiAttributePattern(length);
                break;
            case PatternType.Growing:
                pattern.Elements = GenerateGrowingPattern(length, attributeType);
                break;
        }

        return pattern;
    }

    private List<ElementData> GenerateABPattern(int length, AttributeType attributeType)
    {
        var elements = new List<ElementData>();

        // Choose 2 random distinct values for the attribute
        ElementData elementA = GetRandomElement(attributeType);
        ElementData elementB = GetRandomElement(attributeType, exclude: elementA);

        // Repeat AB pattern
        for (int i = 0; i < length; i++)
        {
            elements.Add(i % 2 == 0 ? elementA : elementB);
        }

        return elements;
    }

    private List<ElementData> GenerateABCPattern(int length, AttributeType attributeType)
    {
        var elements = new List<ElementData>();

        ElementData elementA = GetRandomElement(attributeType);
        ElementData elementB = GetRandomElement(attributeType, exclude: elementA);
        ElementData elementC = GetRandomElement(attributeType, exclude: new[] { elementA, elementB });

        // Repeat ABC pattern
        for (int i = 0; i < length; i++)
        {
            if (i % 3 == 0) elements.Add(elementA);
            else if (i % 3 == 1) elements.Add(elementB);
            else elements.Add(elementC);
        }

        return elements;
    }

    private List<ElementData> GenerateAABBPattern(int length, AttributeType attributeType)
    {
        var elements = new List<ElementData>();

        ElementData elementA = GetRandomElement(attributeType);
        ElementData elementB = GetRandomElement(attributeType, exclude: elementA);

        // Repeat AABB pattern
        for (int i = 0; i < length; i++)
        {
            if (i % 4 == 0 || i % 4 == 1) elements.Add(elementA);
            else elements.Add(elementB);
        }

        return elements;
    }

    private List<ElementData> GenerateMultiAttributePattern(int length)
    {
        var elements = new List<ElementData>();

        // Multi-attribute: Both color AND shape must match in pattern
        ElementData elementA = new ElementData { Color = "Red", Shape = "Circle", Size = "Medium" };
        ElementData elementB = new ElementData { Color = "Blue", Shape = "Square", Size = "Medium" };

        // AB pattern with both attributes
        for (int i = 0; i < length; i++)
        {
            elements.Add(i % 2 == 0 ? elementA : elementB);
        }

        return elements;
    }

    private List<ElementData> GenerateGrowingPattern(int length, AttributeType attributeType)
    {
        var elements = new List<ElementData>();

        // Growing pattern: 1-2-1-2-2-1-2-2-2 (Fibonacci-like)
        ElementData elementA = GetRandomElement(attributeType);
        ElementData elementB = GetRandomElement(attributeType, exclude: elementA);

        int groupSize = 1;
        int currentGroup = 0;
        bool isElementA = true;

        for (int i = 0; i < length; i++)
        {
            elements.Add(isElementA ? elementA : elementB);
            currentGroup++;

            if (currentGroup >= groupSize)
            {
                isElementA = !isElementA;
                if (!isElementA)
                {
                    groupSize++; // Growing: 1, 2, 3, 4...
                }
                currentGroup = 0;
            }
        }

        return elements;
    }

    private ElementData GetRandomElement(AttributeType attributeType, params ElementData[] exclude)
    {
        // Implementation: Select random color/shape/size based on attribute type
        // Avoid elements in exclude list
        // Return new ElementData

        var availableColors = new[] { "Red", "Blue", "Yellow", "Green", "Orange", "Purple", "Pink", "Brown" };
        var availableShapes = new[] { "Circle", "Square", "Triangle", "Star", "Rectangle", "Hexagon", "Diamond", "Heart" };
        var availableSizes = new[] { "Small", "Medium", "Large" };

        string color = availableColors[Random.Range(0, availableColors.Length)];
        string shape = availableShapes[Random.Range(0, availableShapes.Length)];
        string size = availableSizes[Random.Range(0, availableSizes.Length)];

        // Ensure distinct from exclude list
        // (Simplified - full implementation would check exclude list)

        return new ElementData { Color = color, Shape = shape, Size = size };
    }

    public List<ElementData> GenerateDistractors(PatternData pattern, int count)
    {
        var distractors = new List<ElementData>();

        // Generate elements NOT in the pattern
        for (int i = 0; i < count; i++)
        {
            ElementData distractor;
            do
            {
                distractor = GetRandomElement(pattern.AttributeType);
            }
            while (pattern.Elements.Any(e => e.Equals(distractor)));

            distractors.Add(distractor);
        }

        return distractors;
    }
}
```

### Backend API Integration

#### API Endpoints (RESTful)

**Base URL**: `https://api.skillbridge.com/v1`

**Authentication**: JWT Bearer token

#### Endpoint 1: Start Pattern Session
```http
POST /sessions/start

Request Body:
{
  "game_id": "pattern_builder_v1",
  "user_id": "user_67890",
  "child_profile_id": "child_12345",
  "configuration": {
    "difficulty_level": 5,
    "mode": "copy",
    "pattern_type": "ABC",
    "attribute_type": "shape",
    "sensory_profile": "energetic"
  }
}

Response:
{
  "session_id": "a1b2c3d4-e5f6-7890-abcd-1234567890ab",
  "timestamp": "2025-10-20T10:15:00Z",
  "status": "active",
  "recommended_pattern_length": 6
}
```

#### Endpoint 2: Log Pattern Event
```http
POST /sessions/:session_id/events

Request Body:
{
  "event_type": "element_placed",
  "timestamp": "2025-10-20T10:18:22Z",
  "data": {
    "element": {
      "color": "red",
      "shape": "circle",
      "size": "medium"
    },
    "slot_index": 2,
    "is_correct": true,
    "prompt_level": 0,
    "response_time_ms": 12400
  }
}

Response:
{
  "event_id": "evt_98765",
  "recorded": true
}
```

#### Endpoint 3: Complete Pattern Session
```http
POST /sessions/:session_id/complete

Request Body:
{
  "timestamp_end": "2025-10-20T10:28:45Z",
  "duration_seconds": 825,
  "performance_metrics": {
    "patterns_completed": 6,
    "pattern_accuracy": 75.0,
    "element_accuracy": 79.2,
    "prompt_dependency": 27.1,
    "flexibility_score": 100.0
  }
}

Response:
{
  "session_completed": true,
  "next_recommended_level": 5,
  "skills_updated": [
    {
      "skill_id": "ablls_g21",
      "new_mastery_percentage": 82.4,
      "status": "in_progress"
    }
  ],
  "achievements_unlocked": ["pattern_copier_bronze"]
}
```

---

## 10. TESTING & VALIDATION

### Test Plan Overview

#### Phase 1: Internal Testing (Week 3, Days 1-2)
**Testers**: 6 team members
**Duration**: 2 days
**Focus**: Functionality, pattern algorithms, UI/UX

**Test Cases**:
1. **Pattern Generation**: Verify all 8 pattern types generate correctly
2. **Validation Logic**: Test correct/incorrect element placement detection
3. **Cognitive Flexibility**: Trigger dimension switches, verify tracking
4. **Prompt System**: Trigger all 5 prompt levels, verify appropriate hints
5. **Accessibility**: Screen reader, keyboard, switch access, voice control
6. **Performance**: Load times, frame rate, memory usage (target: 60fps WebGL)
7. **Multi-Device**: Test on Windows, Mac, iOS, Android, various screen sizes
8. **Edge Cases**: Rapid element placement, palette exhaustion, network issues

**Exit Criteria**:
- Zero critical bugs (crashes, data loss, incorrect pattern validation)
- <5 minor bugs (cosmetic issues)
- Load time <3 seconds on mid-tier devices
- Frame rate 60fps sustained

#### Phase 2: Clinical Testing (Week 3, Days 3-4)
**Testers**: BCBA, SLP, OT, Child Psychologist
**Duration**: 2 days
**Focus**: Educational validity, cognitive load, flexibility assessment

**Validation Checklist**:
- ✅ Pattern types align with ABLLS-R G20-G25 developmental sequence
- ✅ Difficulty progression appropriate (not too fast/slow)
- ✅ Cognitive flexibility challenges valid (dimension switching)
- ✅ Prompting hierarchy follows ABA best practices
- ✅ Errorless mode effective for struggling learners
- ✅ Pattern rule explanations accurate and child-friendly
- ✅ Data collection captures flexibility and perseveration
- ✅ Mastery criteria scientifically sound (80%+ over 3 sessions)

**BCBA Sign-Off Form**:
```
Clinical Validation: Pattern Builder

Reviewer: Dr. [Name], BCBA-D
Date: October 20, 2025

Pattern Progression:     [X] Approved  [ ] Needs Revision
Cognitive Flexibility:   [X] Approved  [ ] Needs Revision
Prompting System:        [X] Approved  [ ] Needs Revision
Data Collection:         [X] Approved  [ ] Needs Revision
Flexibility Tracking:    [X] Approved  [ ] Needs Revision

Overall Recommendation: [X] APPROVED FOR BETA TESTING

Comments:
"Excellent progression from AB to multi-attribute patterns. Cognitive
flexibility dimension switching is innovative and clinically sound.
Recommend: Add optional timer for children who work well under time
pressure (but keep default untimed). Otherwise ready for beta."

Signature: _________________ Date: __________
```

#### Phase 3: Accessibility Audit (Week 3, Day 5)
**Tester**: Accessibility Specialist
**Duration**: 1 day
**Focus**: WCAG 2.1 AA compliance, colorblind modes

**WCAG 2.1 AA Checklist** (50 criteria):
- ✅ All elements keyboard accessible (Tab, Enter, Arrow keys)
- ✅ Screen reader announces pattern elements correctly
- ✅ Color contrast 7:1 (AAA) for text, 4.5:1 for UI elements
- ✅ Colorblind modes functional (patterns/symbols overlay)
- ✅ No keyboard traps (can navigate in/out)
- ✅ Focus indicators visible (3px yellow outline)
- ✅ Touch targets 70×70px (exceeds 44px minimum)
- ✅ Reduced motion mode available

**Audit Report**:
```
Accessibility Audit: Pattern Builder

WCAG 2.1 Level AA: PASS ✅
- 50/50 criteria met
- Zero violations detected

Colorblind Mode: PASS ✅
- Patterns work in grayscale
- Symbol overlays clear

Autism-Specific: PASS ✅
- Predictable layout ✓
- No sudden surprises ✓
- Cognitive support tools ✓

Recommendation: Add tactile feedback option for haptic devices.

Overall: APPROVED FOR BETA LAUNCH

Signature: _________________ Date: __________
```

#### Phase 4: Beta Family Testing (Week 4, 7 days)
**Testers**: 10 families with autistic children (ages 4-8)
**Duration**: 1 week
**Focus**: Real-world usability, engagement, learning, cognitive flexibility

**Recruitment Criteria**:
- Diverse age range (4-8 years)
- Mix of verbal, minimally verbal, non-verbal
- Range of executive function levels
- Prior experience with pattern activities (varied)

**Parent Survey Questions**:
1. Did your child complete sessions? (Yes/No)
2. Engagement level (1-5 scale)
3. Frustration observed? (Yes/No)
4. Pattern skill improvement noticed? (Yes/No/Too early)
5. Dimension switching: Did child adapt? (Yes/No/N/A)

**Success Metrics** (Must Achieve to Launch):
- ✅ 80%+ session completion rate
- ✅ 70%+ children show pattern skill improvement after 5 sessions
- ✅ 85%+ parent satisfaction (4/5 or 5/5)
- ✅ <10% technical issues
- ✅ 60%+ children successfully switch dimensions (flexibility)

**Beta Test Results** (Simulated Example):
```
Beta Test Summary: Pattern Builder
Test Period: October 25-November 1, 2025
Participants: 10 families, 12 children

Completion Rate: 88% ✅
- 10/12 children completed majority of sessions
- 2 children needed shorter sessions (5 min vs 10-15) - noted for settings

Skill Improvement: 75% ✅
- 9/12 children showed measurable pattern skill improvement
- 3 children maintained baseline (already proficient in patterns)

Parent Satisfaction: 92% ✅
- 9/10 families rated 4/5 or 5/5
- 1 family rated 3/5 (requested more levels - noted)

Cognitive Flexibility: 67% ✅
- 8/12 children successfully switched dimensions with <3 errors
- 4 children perseverated initially but adapted by session 3

Technical Issues: 3% ✅
- 1 element drag issue on older iPad (fixed)

Safety: 100% ✅
- Zero adverse events
- Zero reports of frustration/distress

Qualitative Feedback:
- "My daughter now spots patterns everywhere - clothing, toys, songs!"
- "Love the dimension switching - really challenges his flexibility"
- "Finally a game that teaches real skills, not just entertainment"
- "Wish there were even MORE levels - he finished all 15!"

Recommendation: APPROVED FOR PRODUCTION LAUNCH
```

---

## 11. POST-LAUNCH SUPPORT & ITERATION

### Week 1-2: Monitoring & Hotfixes

**Metrics Dashboard** (Real-Time):
- Crash rate: Target <0.1%
- Load time p95: Target <3 seconds
- Completion rate: Target >80%
- Pattern accuracy: Monitor for unexpected difficulty spikes
- Flexibility success rate: Target >65% dimension switching

**Common Post-Launch Issues** (Anticipated):
| Issue | Likelihood | Mitigation |
|-------|-----------|------------|
| Element drag lag on low-end Android | Medium | Optimize touch event handling |
| Pattern too complex at Level 7+ | Medium | Add optional "Skip Level" |
| Children wanting more levels (15 insufficient) | High | Add Level Pack 2 (Levels 16-30) |
| Parents confused by flexibility scoring | Low | Add tooltip explanation |

### Month 2: Content Expansion

**Additional Features**:
1. **Extended Level Pack**: Levels 16-30 with expert patterns
2. **Pattern Art Studio**: Free-form pattern design tool (no validation)
3. **Multiplayer Mode**: Co-op pattern building (parent + child)
4. **Pattern of the Day**: Daily challenge with leaderboard

### Month 3: Efficacy Study

**Study Design**:
- **Participants**: 100 children (50 experimental, 50 control)
- **Duration**: 8 weeks
- **Measure**: ABLLS-R G20-G25 pre/post-test + cognitive flexibility task
- **Hypothesis**: Children using Pattern Builder show 40% faster pattern skill acquisition and 30% improvement in cognitive flexibility vs. control

---

## 12. APPENDICES

### Appendix A: Complete Skill Mapping Table

| ABLLS-R Skill | Code | Game Mechanic | Level | Mastery Criteria |
|---------------|------|---------------|-------|------------------|
| Simple AB patterns (2 elements) | G20 | Copy AB color patterns | 1-3 | 85% accuracy, 3 sessions |
| ABC patterns (3 elements) | G21 | Copy/Extend ABC patterns | 4-6 | 80% accuracy, 3 sessions |
| Complex AABB, ABB patterns | G22 | Copy AABB patterns | 7-9 | 75% accuracy, 3 sessions |
| Growing patterns | G23 | Extend growing patterns | 13 | 70% accuracy, 3 sessions |
| Multi-attribute patterns | G24 | Color+Shape patterns | 10-12, 14 | 70% accuracy, 3 sessions |
| Pattern creation | G25 | Create own patterns | 15 | 70% valid patterns, 3 sessions |
| Sequencing | H15 | All modes | All | 80% accuracy |
| Cognitive flexibility | VB-MAPP L14 | Dimension switching | Every 5 levels | 65% switch success |

### Appendix B: Pattern Generation Algorithm Specifications

**[Full mathematical specifications for all 8 pattern types, including edge cases, validation logic, and distractor generation rules]**

### Appendix C: Cognitive Flexibility Research Base

**[Summary of 10 key research papers on pattern recognition, cognitive flexibility, and autism, supporting design decisions]**

### Appendix D: Asset Delivery Checklist

**Art Assets** (Due: Week 2):
- [ ] SVG element factory (programmatic generation)
- [ ] 4 background environments (PNG 1920×1080)
- [ ] 25 UI elements (buttons, icons - SVG)
- [ ] Patty Parrot character (Spine 2D, 6 animations)
- [ ] Particle effects (sparkles, confetti - PNG sprite sheets)

**Audio Assets** (Due: Week 2):
- [ ] 3 background music tracks (OGG, 2-3 min loop)
- [ ] 42 sound effects (OGG, <1 sec each)
- [ ] 120 voice-over lines (3 voices × 40 lines, WAV 48kHz)

**Technical Assets** (Due: Week 3):
- [ ] Unity project (2022.3 LTS, URP)
- [ ] Backend API integrated (session, events, completion endpoints)
- [ ] Cognitive flexibility tracking system
- [ ] Pattern generation + validation algorithms

### Appendix E: Team Hours Breakdown

| Role | Team Member | Hours | Deliverables |
|------|-------------|-------|--------------|
| Game Designer | Sarah Chen | 28h | GDD, pattern algorithm design |
| Unity Developer | Marcus Lee | 110h | Full game implementation, pattern logic |
| 2D Artist | Aisha Patel | 36h | Backgrounds, UI, character |
| Animator | Jordan Kim | 24h | Character animations, feedback effects |
| Sound Designer | Taylor Brooks | 22h | Music, SFX, voice direction |
| Frontend Dev | Casey Wong | 38h | Web integration, UI polish |
| Backend Dev | Alex Rivera | 28h | API endpoints, flexibility tracking |
| BCBA Validation | Dr. Emily Foster | 14h | Clinical review, flexibility assessment |
| Child Psychologist | Dr. Sarah Patel | 6h | Cognitive load assessment |
| OT Review | Dr. Sofia Rodriguez | 4h | Motor, sensory review |
| QA Engineer | Morgan Taylor | 36h | Testing, bug tracking |
| Accessibility Specialist | Jamie Nguyen | 14h | WCAG audit, colorblind testing |
| **TOTAL** | | **360 hours** | Fully functional game |

**Timeline**: 4 weeks (Week 3 of Month 2)

---

## 13. SUCCESS CRITERIA & DEFINITION OF DONE

### Definition of Done (Before Launch)

**Technical**:
- ✅ Builds successfully for WebGL, iOS, Android
- ✅ Loads in <3 seconds on mid-tier devices
- ✅ Maintains 60fps during gameplay
- ✅ All 8 pattern types generate correctly
- ✅ Pattern validation 100% accurate (zero false positives/negatives)
- ✅ Zero critical bugs, <5 minor bugs

**Clinical**:
- ✅ 100% BCBA sign-off
- ✅ Child Psychologist approval (cognitive load)
- ✅ Pattern progression aligns with ABLLS-R G20-G25
- ✅ Cognitive flexibility tracking validated

**Accessibility**:
- ✅ WCAG 2.1 Level AA compliant
- ✅ Colorblind modes functional (patterns + symbols)
- ✅ Screen reader fully functional
- ✅ All 4 sensory profiles implemented

**User Experience**:
- ✅ Beta test completion rate >80%
- ✅ Parent satisfaction >85%
- ✅ Pattern skill improvement in 70%+ children
- ✅ Cognitive flexibility success in 60%+ children

---

**Document Status**: ✅ **COMPLETE & READY FOR DEVELOPMENT**

**Next Steps**:
1. PM assigns tasks in project management tool
2. Art team begins background + character creation (Week 2)
3. Unity developer implements pattern generation algorithms (Week 2)
4. Clinical team reviews and approves GDD (Week 2)
5. Development sprint begins (Week 3)

---

**END OF GAME DESIGN DOCUMENT: PATTERN BUILDER**
